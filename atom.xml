<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>陋室</title>
  
  <subtitle>Colin McGuire&#39;Blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://spiedeman.github.io/"/>
  <updated>2019-03-17T15:09:08.000Z</updated>
  <id>http://spiedeman.github.io/</id>
  
  <author>
    <name>Colin McGuire</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="http://spiedeman.github.io/posts/1243066710/"/>
    <id>http://spiedeman.github.io/posts/1243066710/</id>
    <published>2019-03-17T15:09:08.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="quick-start"><a class="markdownIt-Anchor" href="#quick-start"></a> Quick Start</h2><h3 id="create-a-new-post"><a class="markdownIt-Anchor" href="#create-a-new-post"></a> Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="run-server"><a class="markdownIt-Anchor" href="#run-server"></a> Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="generate-static-files"><a class="markdownIt-Anchor" href="#generate-static-files"></a> Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="deploy-to-remote-sites"><a class="markdownIt-Anchor" href="#deploy-to-remote-sites"></a> Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>vim 技巧</title>
    <link href="http://spiedeman.github.io/posts/4131642440/"/>
    <id>http://spiedeman.github.io/posts/4131642440/</id>
    <published>2019-02-18T02:11:19.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:59 GMT+0800 (中国标准时间) --><h2 id="用法"><a class="markdownIt-Anchor" href="#用法"></a> 用法</h2><h3 id="自定义映射"><a class="markdownIt-Anchor" href="#自定义映射"></a> 自定义映射</h3><h4 id="正确使用optionalt键"><a class="markdownIt-Anchor" href="#正确使用optionalt键"></a> 正确使用option/Alt键</h4><p><code>option</code>键在<code>macOS</code>下作为组合按键之一，对应于PC、Linux上的<code>Alt</code>键，但是功能不太一样。<code>Mac</code>上字母及一些标点符号与<code>option</code>组合会输出<code>unicode</code>字符。<br>原因在于按下按下<code>option</code>键发送的不是<code>Escape Sequence</code>。因此在<code>vim,emacs</code>等终端软件中，没法直接使用<code>Alt</code>键定义映射。</p><p>找到原因就好办，解决方法分为两步：</p><ol><li>在终端中修改<code>option/Alt</code>键的行为</li><li>在<code>vim,emacs</code>等运行于终端下的软件中进行可能必要的设置</li></ol><p>以终端程序<code>kitty</code>和<code>alacritty</code>为例，具体讨论解决方法中的第一步如何操作。</p><ul><li>kitty<ul><li>打开配置文件<code>kitty.conf</code></li><li>找到选项<code>macos_option_as_alt no</code>，将<code>no</code>改为<code>yes</code></li></ul></li><li>alacrity<ul><li>打开配置文件<code>alacrity.yml</code></li><li>定位到<code>key_bindings</code></li><li>添加需要的键位设置，例如 <code>- { key: x, mods: Alt, chars: &quot;\x1bx&quot; }</code></li></ul></li></ul><p>以运行在终端下的<code>vim</code>为例，给出第二步中需要的具体操作。</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">Terminal_MetaMode</span><span class="params">(mode)</span></span></span><br><span class="line">    <span class="keyword">set</span> ttimeout</span><br><span class="line">    <span class="keyword">if</span> $TMUX != <span class="string">''</span></span><br><span class="line">        <span class="keyword">set</span> ttimeoutlen=<span class="number">30</span></span><br><span class="line">    <span class="keyword">elseif</span> &amp;ttimeoutlen &gt; <span class="number">80</span> || &amp;ttimeoutlen &lt;= <span class="number">0</span></span><br><span class="line">        <span class="keyword">set</span> ttimeoutlen=<span class="number">80</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">has</span>(<span class="string">'nvim'</span>) || <span class="built_in">has</span>(<span class="string">'gui_running'</span>) || $TERM_PROGRAM =~? <span class="string">'iTerm2'</span></span><br><span class="line">        <span class="keyword">return</span> </span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line">    <span class="comment">" 👆表示只有某些终端下的vim需要👇的设置</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span>! <span class="title">s</span>:<span class="title">metacode</span><span class="params">(mode, key)</span></span></span><br><span class="line">        <span class="comment">" 这个函数的作用是告诉vim，&lt;M-x&gt;的键盘序列码是多少</span></span><br><span class="line">        <span class="comment">" 这样vim将按照ttimeoutlen的设置来检查是否超时</span></span><br><span class="line">        <span class="comment">" 如果用 `noremap &lt;ESC&gt;x &lt;M-x&gt;` 然后 `noremap &lt;M-x&gt; ...`的方式，</span></span><br><span class="line">        <span class="comment">" 则会使用timeoutlen来检查是否超时</span></span><br><span class="line">        <span class="comment">" 一般timeoutlen设置的相对更大，如果用它更容易误操作，降低使用体验</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable">a:mode</span> == <span class="number">0</span></span><br><span class="line">            exec <span class="string">"set &lt;M-"</span>.<span class="variable">a:key</span>.<span class="string">"&gt;=\e"</span>.<span class="variable">a:key</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="comment">"👇这条需要对终端进行更针对性的设置，写本节时只想到在alacrity中设置会容易些</span></span><br><span class="line">            exec <span class="string">"set &lt;M-"</span>.<span class="variable">a:key</span>.<span class="string">"&gt;=\e]&#123;0&#125;"</span>.<span class="variable">a:key</span>.<span class="string">"~"</span></span><br><span class="line">        <span class="keyword">endif</span></span><br><span class="line">    <span class="keyword">endfunction</span></span><br><span class="line">    <span class="comment">" 针对alacrity，还需设置几个功能键</span></span><br><span class="line">    <span class="keyword">if</span> $TERM_PROGRAM =~? <span class="string">'alacritty'</span></span><br><span class="line">        exec <span class="string">"set &lt;F1&gt;=\eOP"</span></span><br><span class="line">        exec <span class="string">"set &lt;F2&gt;=\eOQ"</span></span><br><span class="line">        exec <span class="string">"set &lt;F3&gt;=\eOR"</span></span><br><span class="line">        exec <span class="string">"set &lt;F4&gt;=\eOS"</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line">    <span class="keyword">for</span> i in <span class="built_in">range</span>(<span class="number">10</span>)</span><br><span class="line">        <span class="keyword">call</span> <span class="variable">s:metacode</span>(<span class="variable">a:mode</span>, <span class="built_in">nr2char</span>(<span class="built_in">char2nr</span>(<span class="string">'0'</span>) + i))</span><br><span class="line">    <span class="keyword">endfor</span></span><br><span class="line">    <span class="keyword">for</span> i in <span class="built_in">range</span>(<span class="number">26</span>)</span><br><span class="line">        <span class="keyword">call</span> <span class="variable">s:metacode</span>(<span class="variable">a:mode</span>, <span class="built_in">nr2char</span>(<span class="built_in">char2nr</span>(<span class="string">'a'</span>) + i))</span><br><span class="line">        <span class="keyword">call</span> <span class="variable">s:metacode</span>(<span class="variable">a:mode</span>, <span class="built_in">nr2char</span>(<span class="built_in">char2nr</span>(<span class="string">'A'</span>) + i))</span><br><span class="line">    <span class="keyword">endfor</span></span><br><span class="line">    <span class="keyword">if</span> <span class="variable">a:mode</span> != <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> <span class="keyword">c</span> in [<span class="string">','</span>, <span class="string">'.'</span>, <span class="string">'/'</span>. <span class="string">';'</span>, <span class="string">'['</span>, <span class="string">']'</span>, <span class="string">'&#123;'</span>, <span class="string">'&#125;'</span>]</span><br><span class="line">            <span class="keyword">call</span> <span class="variable">s:metacode</span>(<span class="variable">a:mode</span>, <span class="keyword">c</span>)</span><br><span class="line">        <span class="keyword">endfor</span></span><br><span class="line">        <span class="keyword">for</span> <span class="keyword">c</span> in [<span class="string">'?'</span>, <span class="string">':'</span>, <span class="string">'-'</span>, <span class="string">'_'</span>]</span><br><span class="line">            <span class="keyword">call</span> <span class="variable">s:metacode</span>(<span class="variable">a:mode</span>, <span class="keyword">c</span>)</span><br><span class="line">        <span class="keyword">endfor</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">for</span> <span class="keyword">c</span> in [<span class="string">','</span>, <span class="string">'.'</span>, <span class="string">'/'</span>, <span class="string">';'</span>, <span class="string">'&#123;'</span>, <span class="string">'&#125;'</span>]</span><br><span class="line">            <span class="keyword">call</span> <span class="variable">s:metacode</span>(<span class="variable">a:mode</span>, <span class="keyword">c</span>)</span><br><span class="line">        <span class="keyword">endfor</span></span><br><span class="line">        <span class="keyword">for</span> <span class="keyword">c</span> in [<span class="string">'?'</span>, <span class="string">':'</span>, <span class="string">'-'</span>, <span class="string">'_'</span>]</span><br><span class="line">            <span class="keyword">call</span> <span class="variable">s:metacode</span>(<span class="variable">a:mode</span>, <span class="keyword">c</span>)</span><br><span class="line">        <span class="keyword">endfor</span></span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="comment">" 设置用户自定义命令</span></span><br><span class="line">command! -nargs=<span class="number">0</span> -bang VimMetaInit <span class="keyword">call</span> Terminal_MetaMode(<span class="symbol">&lt;bang&gt;</span><span class="number">0</span>)</span><br><span class="line"><span class="comment">" buffer 读入后自动进行设置</span></span><br><span class="line"><span class="keyword">augroup</span> alt_key</span><br><span class="line">    autocmd!</span><br><span class="line">    <span class="keyword">autocmd</span> BufReadPost * :VimMetaInit</span><br><span class="line"><span class="keyword">augroup</span> END</span><br></pre></td></tr></table></figure><h3 id="用户自定义事件"><a class="markdownIt-Anchor" href="#用户自定义事件"></a> 用户自定义事件</h3><p>自定义了切换透明和背景的函数，并绑定了快捷键。同时主题栏使用的是<a href="https://github.com/itchyny/lightline.vim" target="_blank" rel="noopener">lightline</a>。<br>我为<code>dark</code>和<code>light</code>两种背景选取不同的<code>lightline</code>主题，为了使背景切换之后，主题栏的切换也生效，这里使用用户自定义事件来解决问题。<br>当然这不是唯一的方法。</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">ToggleBackground</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">" A lot of stuff is happening here.</span></span><br><span class="line">    <span class="comment">" 定义一个自定义事件</span></span><br><span class="line">    <span class="keyword">doautocmd</span> User ToggleBackgroundExit</span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">ToggleTransparent</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">" A lot of stuff is happening here.</span></span><br><span class="line">    <span class="comment">" 定义一个自定义事件</span></span><br><span class="line">    <span class="keyword">doautocmd</span> User ToggleTransparentExit</span><br><span class="line"><span class="keyword">endfunction</span></span><br></pre></td></tr></table></figure><p>现在可以在切换背景和透明度执行完成后做任何想做的事：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">autocmd</span> User ToggleBackgroundExit <span class="keyword">call</span> lightline#enable()</span><br></pre></td></tr></table></figure><h3 id="插件"><a class="markdownIt-Anchor" href="#插件"></a> 插件</h3><h4 id="插件管理器vim-plug"><a class="markdownIt-Anchor" href="#插件管理器vim-plug"></a> 插件管理器（vim-plug）</h4><p><a href="https://github.com/junegunn/vim-plug" target="_blank" rel="noopener">vim-plug</a>是一款异步插件管理器。具有安装速度快，延迟加载等特性。<br>这里要讨论的是刚发现的一个特性，可以让插件按照依赖关系进行加载。</p><p>栗子🌰，我有三款用于<code>markdown</code>的插件，分别是</p><ul><li><a href="https://github.com/plasticboy/vim-markdown" target="_blank" rel="noopener"><code>plasticboy/vim-markdown</code></a></li><li><a href="https://github.com/jszakmeister/markdown2ctags" target="_blank" rel="noopener"><code>jszakmeister/markdown2ctags</code></a></li><li><a href="https://github.com/iamcco/markdown-preview.nvim" target="_blank" rel="noopener"><code>iamcco/markdown-preview.nvim</code></a></li></ul><p>原本可以在每个插件后面，用<code>{'for':'markdown'}</code>使其仅在编辑<code>.md</code>文件时才加载。但我发现<br>这种方法对第二款插件无效。因此想到这里的办法。</p><p><code>vim-plug</code>在调用函数<code>plug#load()</code>加载插件之后会以插件名定义一个用户自定义事件。可以利用这一事件触发对其有依赖的插件的调用。如下为具体的使用案例：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">" 以文件类型作为加载的依据</span></span><br><span class="line">Plug <span class="string">'iamcco/markdown-preview.nvim'</span>, &#123;<span class="string">'for'</span>: <span class="string">'markdown'</span>, <span class="string">'do'</span>: <span class="string">'cd app &amp; yarn install'</span>&#125;</span><br><span class="line">  <span class="comment">" 下面的插件无法按照文件类型进行加载</span></span><br><span class="line">  <span class="comment">" 故通过vim-plug 定义的用户自定义事件进行触发</span></span><br><span class="line">  Plug <span class="string">'plasticboy/vim-markdown'</span>, &#123;<span class="string">'on'</span> : []&#125;</span><br><span class="line">  Plug <span class="string">'jszakmeister/markdown2ctags'</span>, &#123;<span class="string">'on'</span>: []&#125;</span><br><span class="line">  <span class="keyword">augroup</span> vimplug_load_for_markdown</span><br><span class="line">    autocmd!</span><br><span class="line">    <span class="keyword">autocmd</span> User markdown-preview.nvim plug#load(</span><br><span class="line">                \ <span class="string">'vim-markdown'</span>,</span><br><span class="line">                \ <span class="string">'markdown2ctags'</span>,</span><br><span class="line">                \ )</span><br><span class="line">                \ | autocmd! vimplug_load_for_markdown</span><br><span class="line">  <span class="keyword">augroup</span> END</span><br></pre></td></tr></table></figure><p>进一步，针对一个插件的所有配置可以做到这样：在插件被</p><ul><li>加载前，不载入</li><li>加载后，自动载入</li></ul><p>可以这样实现</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">" 仍然以上面的插件为例</span></span><br><span class="line"><span class="comment">" 在载入 vim-markdown之后自动加载相关配置。所有配置在函数SetVimmarkdown()之中</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">SetVimmarkdown</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">" all configurations for vim-markdown are at here</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">augroup</span> load_for_vimmarkdown</span><br><span class="line">    autocmd!</span><br><span class="line">    <span class="keyword">autocmd</span> User <span class="keyword">vim</span>-markdown <span class="keyword">call</span> SetVimmarkdown() | autocmd!  load_for_vimmarkdown</span><br><span class="line"><span class="keyword">augroup</span> END</span><br></pre></td></tr></table></figure><h4 id="中文输入法"><a class="markdownIt-Anchor" href="#中文输入法"></a> 中文输入法</h4><p><code>vim</code> 的模式切换与中文输入法并不总能够和谐共处。</p><table><thead><tr><th></th><th>英文</th><th>中文</th></tr></thead><tbody><tr><td>normal</td><td>😃</td><td>😦</td></tr><tr><td>insert</td><td>😃</td><td>😃</td></tr></tbody></table><p>解决这个问题的方式大体上有两种，1、<code>vim</code><br>提供中文输入法，那么这个问题就留给<code>vim</code>及其插件的开发者们去解决了；2、仍然使用外部中文输入法，如搜狗等，<br>那么关键在于以哪种方式自动切换输入法！</p><p>这里沿用第二种思路。尝试过如下几种方式：</p><ol><li>通过 vim 内置函数模拟按键操作来切换输入法。没有成功，但不排除可行性。</li><li>调用外部程序进行输入法切换。成功，但是并不完美。</li></ol><p>所以最终采取的方案是通过调用外部程序在进入和离开<code>insert</code>模式时只能切换输入法。实现方式具体看下面的<code>vim</code>配置。</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">" 定义缓冲区变量，使得可以对每个缓冲区单独监控输入法状态</span></span><br><span class="line"><span class="keyword">au</span> BufEnter * <span class="keyword">let</span> <span class="variable">b:im</span>=<span class="number">0</span></span><br><span class="line"><span class="comment">" 为了尽量不影响体验，通过异步机制来进行处理</span></span><br><span class="line"><span class="comment">" 下面的函数用于在 job 进行过程中处理返回信息</span></span><br><span class="line">fun! IMHandler(channel, msg)</span><br><span class="line">    <span class="keyword">if</span> <span class="variable">a:msg</span> !=? <span class="string">'com.apple.keylayout.ABC'</span></span><br><span class="line">        <span class="comment">" 切换到英文输入法之前保存当前状态</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">b:im</span> = <span class="number">1</span></span><br><span class="line">        <span class="keyword">call</span> job_start([<span class="string">'issw'</span>, <span class="string">'com.apple.keylayout.ABC'</span>])</span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line">endfun</span><br><span class="line">fun! Lang2en()</span><br><span class="line">    <span class="keyword">let</span> job = job_start([<span class="string">'issw'</span>], &#123;<span class="string">"out_cb"</span>: <span class="string">"IMHandler"</span>&#125;)</span><br><span class="line">endfun</span><br><span class="line"><span class="comment">" 这里中文输入法的切换用了自己写的脚本，虽然也可以用上面的 issw 命令。</span></span><br><span class="line">fun! Lang2zh()</span><br><span class="line">    <span class="keyword">if</span> <span class="variable">b:im</span> == <span class="number">1</span></span><br><span class="line">        <span class="keyword">call</span> job_start([<span class="string">'switchim'</span>])</span><br><span class="line">    <span class="keyword">endif</span></span><br><span class="line">endfun</span><br><span class="line"><span class="keyword">autocmd</span> InsertEnter * <span class="keyword">call</span> Lang2zh()</span><br><span class="line"><span class="keyword">autocmd</span> BufEnter,InsertLeave * <span class="keyword">call</span> Lang2en()</span><br></pre></td></tr></table></figure><p>因为不想用破解软件来修改按键映射及快捷键，导致仍有不足之处：</p><ul><li>调用的外部程序切换输入法不够快，仍然有一定几率产生困扰。</li><li>insert 模式下，如果要用搜狗输入法，从英文切换回中文比较麻烦。</li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:59 GMT+0800 (中国标准时间) --&gt;&lt;h2 id=&quot;用法&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#用法&quot;&gt;&lt;/a&gt; 用法&lt;/h2&gt;&lt;h3 id=&quot;自定义映射&quot;
      
    
    </summary>
    
      <category term="Vim" scheme="http://spiedeman.github.io/categories/Vim/"/>
    
    
      <category term="Vim" scheme="http://spiedeman.github.io/tags/Vim/"/>
    
  </entry>
  
  <entry>
    <title>graphviz-introduction</title>
    <link href="http://spiedeman.github.io/posts/1414645917/"/>
    <id>http://spiedeman.github.io/posts/1414645917/</id>
    <published>2019-02-16T08:46:44.000Z</published>
    <updated>2019-03-17T15:09:06.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><p>这篇文章参考自<a href="http://www.graphviz.org/pdf/dotguide.pdf" target="_blank" rel="noopener">Drawing graphs with <em>dot</em></a></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>o</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">dot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span></span></span></span> 通过<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi><mi>O</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">DOT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.02778em">D</span><span class="mord mathdefault" style="margin-right:.02778em">O</span><span class="mord mathdefault" style="margin-right:.13889em">T</span></span></span></span>语言来作图。该语言描述了三大对象：图(graphs)，节点(nodes)，边(edges)。同时支持有向图和无向图，并支持图的嵌套(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>u</mi><mi>b</mi><mi>g</mi><mi>r</mi><mi>a</mi><mi>p</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">subgraph</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:.03588em">g</span><span class="mord mathdefault" style="margin-right:.02778em">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">p</span><span class="mord mathdefault">h</span></span></span></span>)。<br>默认采用有向图的布局方式，有另一个独立的布局工具，<em>neato</em>，用于无向图。</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>o</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">dot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span></span></span></span> 编译的方式是按顺序一行一行地处理 *.dot 文件中内容。所以各种对象的属性的有效性从从属性设置语句所在行开始直到下一次属性设置语句所在行之前。</p><p>完整的属性描述可以参考<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mi>r</mi><mi>a</mi><mi>p</mi><mi>h</mi><mi>v</mi><mi>i</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">Graphviz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:.02778em">r</span><span class="mord mathdefault">a</span><span class="mord mathdefault">p</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right:.03588em">v</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:.04398em">z</span></span></span></span>官网的<a href="http://www.graphviz.org/doc/info/attrs.html" target="_blank" rel="noopener">该页面</a>。</p><h2 id="要素"><a class="markdownIt-Anchor" href="#要素"></a> 要素</h2><p>一幅图可以包含如下要素：</p><ol><li>注释</li></ol><ul><li>双斜杠</li></ul><ol start="2"><li>有向图 or 无向图</li><li>节点之间的关系</li></ol><ul><li>有向图：<code>a-&gt;b</code>，节点 a 指向节点 b</li><li>无向图：<code>a--b</code>，节点 a 和节点 b连通</li></ul><ol start="4"><li>定义节点属性</li></ol><ul><li>形状，多边形<code>polygon</code>和<code>record</code>（不知道怎么翻译）</li><li>颜色</li><li>标签</li><li>等等</li></ul><ol start="5"><li>定义边的属性</li></ol><ul><li>形状</li><li>颜色</li><li>文本</li><li>等等</li></ul><ol start="6"><li>定义结构(<code>record</code>)</li></ol><ul><li>内部结构</li><li>方向，水平或竖直排列</li><li>标签</li></ul><h2 id="样例"><a class="markdownIt-Anchor" href="#样例"></a> 样例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">digraph G&#123;</span><br><span class="line">    a -&gt; b -&gt; c;</span><br><span class="line">    b -&gt; d;</span><br><span class="line">    a [shape=polygon,sides=5,peripheries=3,color=lightblue,style=filled];</span><br><span class="line">    c [shape=polygon,sides=4,skew=.4,label=&quot;hello world&quot;]</span><br><span class="line">    d [shape=invtriangle];</span><br><span class="line">    e [shape=polygon,sides=4,distortion=.7];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/posts/1414645917/graph-with-polygonal-shapes.svg"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">digraph structs&#123;</span><br><span class="line">node [shape=record];</span><br><span class="line">    struct1 [shape=record,label=&quot;&lt;f0&gt; left|&lt;f1&gt; mid\ dle|&lt;f2&gt; right&quot;];</span><br><span class="line">    struct2 [shape=record,label=&quot;&lt;f0&gt; one|&lt;f1&gt; two&quot;];</span><br><span class="line">    struct3 [shape=record,label=&quot;hello\nworld | &#123; b |&#123;c|&lt;here&gt; d|e&#125;| f&#125;|g|h &quot;];</span><br><span class="line">    struct1 -&gt; struct2;</span><br><span class="line">    struct1 -&gt; struct3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/posts/1414645917/records-with-nested-fields.svg"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">    node[shape=record,height=.1];   //定义node样式</span><br><span class="line"></span><br><span class="line">    node0[label=&quot;&lt;f0&gt; |&lt;f1&gt; A|&lt;f2&gt; &quot;]; //具体的一个node，含三个属性，第二个属性有名字</span><br><span class="line">    node0[label=&quot;&lt;f0&gt; |&lt;f1&gt; B|&lt;f2&gt; &quot;];</span><br><span class="line">    node0[label=&quot;&lt;f0&gt; |&lt;f1&gt; C|&lt;f2&gt; &quot;];</span><br><span class="line">    node0[label=&quot;&lt;f0&gt; |&lt;f1&gt; D|&lt;f2&gt; &quot;];</span><br><span class="line">    node0[label=&quot;&lt;f0&gt; |&lt;f1&gt; E|&lt;f2&gt; &quot;];</span><br><span class="line">    node0[label=&quot;&lt;f0&gt; |&lt;f1&gt; F|&lt;f2&gt; &quot;];</span><br><span class="line">    node0[label=&quot;&lt;f0&gt; |&lt;f1&gt; H|&lt;f2&gt; &quot;];</span><br><span class="line">    node0[label=&quot;&lt;f0&gt; |&lt;f1&gt; I|&lt;f2&gt; &quot;];</span><br><span class="line">    node0[label=&quot;&lt;f0&gt; |&lt;f1&gt; J|&lt;f2&gt; &quot;];</span><br><span class="line">    node0[label=&quot;&lt;f0&gt; |&lt;f1&gt; K|&lt;f2&gt; &quot;];</span><br><span class="line"></span><br><span class="line">    &quot;node0&quot;:f2 -&gt; &quot;node1&quot;: f1;  //node0的第三个属性指向node1的第二个属性</span><br><span class="line">    &quot;node1&quot;:f0 -&gt; &quot;node2&quot;: f1;</span><br><span class="line">    &quot;node1&quot;:f1 -&gt; &quot;node3&quot;: f2;</span><br><span class="line">    &quot;node3&quot;:f0 -&gt; &quot;node4&quot;: f0;</span><br><span class="line">    &quot;node3&quot;:f1 -&gt; &quot;node5&quot;: f1;</span><br><span class="line">    &quot;node3&quot;:f2 -&gt; &quot;node6&quot;: f2;</span><br><span class="line">    &quot;node6&quot;:f1 -&gt; &quot;node7&quot;: f1;</span><br><span class="line">    &quot;node7&quot;:f1 -&gt; &quot;node8&quot;: f0;</span><br><span class="line">    &quot;node2&quot;:f2 -&gt; &quot;node9&quot;: f1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="/posts/1414645917/record-structure.svg"><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;这篇文章参考自&lt;a href=&quot;http://www.graphviz.org/pdf/dotguide.pdf&quot; target=&quot;_blank&quot; r
      
    
    </summary>
    
      <category term="Graphviz" scheme="http://spiedeman.github.io/categories/Graphviz/"/>
    
    
      <category term="graphviz" scheme="http://spiedeman.github.io/tags/graphviz/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 16.04 LTS 开启BBR</title>
    <link href="http://spiedeman.github.io/posts/3381164653/"/>
    <id>http://spiedeman.github.io/posts/3381164653/</id>
    <published>2019-01-05T16:56:29.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:59 GMT+0800 (中国标准时间) --><p>Vultr 上安装 ubuntu 16.04 并开启BBR。</p><h1 id="更新内核"><a class="markdownIt-Anchor" href="#更新内核"></a> 更新内核</h1><p><code>BBR</code>只支持4.9+的Linux内核版本，因此首先检查并更新内核。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前内核版本</span></span><br><span class="line">uname -r</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装最新版内核</span></span><br><span class="line">sudo apt install linux-image-generic-hwe-16.04</span><br></pre></td></tr></table></figure><h1 id="重启"><a class="markdownIt-Anchor" href="#重启"></a> 重启</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure><h1 id="开启bbr"><a class="markdownIt-Anchor" href="#开启bbr"></a> 开启BBR</h1><p>添加如下两行至文件<code>/etc/sysctl.conf</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.default_qdisc=fq</span><br><span class="line">net.ipv4.tcp_congestion_control=bbr</span><br></pre></td></tr></table></figure><p>启动bbr</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -p</span><br></pre></td></tr></table></figure><p>验证是否成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lsmod | grep bbr</span><br><span class="line"></span><br><span class="line">tcp_bbr         20480 1</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:59 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;Vultr 上安装 ubuntu 16.04 并开启BBR。&lt;/p&gt;&lt;h1 id=&quot;更新内核&quot;&gt;&lt;a class=&quot;markdownIt-Anchor
      
    
    </summary>
    
      <category term="Vultr" scheme="http://spiedeman.github.io/categories/Vultr/"/>
    
    
      <category term="BBR" scheme="http://spiedeman.github.io/tags/BBR/"/>
    
  </entry>
  
  <entry>
    <title>python万物皆对象</title>
    <link href="http://spiedeman.github.io/posts/1949292692/"/>
    <id>http://spiedeman.github.io/posts/1949292692/</id>
    <published>2018-12-14T11:33:45.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><h1 id="类与对象"><a class="markdownIt-Anchor" href="#类与对象"></a> 类与对象</h1><p><code>Python</code>中有两种关系：</p><ul><li>类与对象，顶点为<code>Type</code>。</li><li>继承，顶点为<code>Object</code>。</li></ul><h2 id="类与对象type"><a class="markdownIt-Anchor" href="#类与对象type"></a> 类与对象（Type）</h2><p><code>__class__</code>方法查看当前对象所属的类，亦即由哪个类实例化得到。</p><blockquote><p>Python 中的对象可以分成两种</p><ul><li>不是类的对象，例如手里的一个🍎。</li><li>亦是类的对象，例如🍎，作为水果这个类的一个实例（对象）。</li></ul></blockquote><p>类比如下关系：</p><blockquote><p>手里的🍎（创建自）🍎（创建自）水果（创建自）食物（创建自）… 顶点</p></blockquote><p>Python 版本</p><blockquote><p>不是类的对象（创建自）亦是类的对象（创建自）类的类（创建自）Type（顶点）</p></blockquote><h2 id="继承object"><a class="markdownIt-Anchor" href="#继承object"></a> 继承（Object）</h2><p><code>__base__</code>方法查看当前类的父类，亦即继承自哪个类。</p><blockquote><p>Python 中的类也可以分成两种</p><ul><li>普通类，类继承链条的末端，其实例不是类。</li><li>元类，类继承链条的非末端，其实例依然是类。</li></ul></blockquote><p>类比如下关系：</p><blockquote><p>🍎（继承自）水果（继承自）食物（继承自）… 顶点</p></blockquote><p>Python 版本</p><blockquote><p>普通类（继承自）元类（继承自）…（继承自）Object（顶点）</p></blockquote><h2 id="typeobject"><a class="markdownIt-Anchor" href="#typeobject"></a> Type/Object</h2><p>Type 作为</p><ul><li>类，继承自 Object</li><li>对象，创建自 Type（自身）</li></ul><p>Object 作为</p><ul><li>类，继承自 Object（自身）</li><li>对象，创建自 Type</li></ul><img src="/posts/1949292692/type-and-object.png" title="类与对象关系"><hr><blockquote><p>道生一，一生二，二生三，三生万物</p></blockquote><p>网上有人用它来理解 <strong>类对象</strong> 关系，觉得生动形象，故记录于此。<br>1、道 即 Type<br>2、一 即 元类<br>3、二 即 普通类<br>4、三 即 实例<br>5、<strong>万物</strong> 即 各种实例属性，方法</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;类与对象&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#类与对象&quot;&gt;&lt;/a&gt; 类与对象&lt;/h1&gt;&lt;p&gt;&lt;code
      
    
    </summary>
    
      <category term="Python" scheme="http://spiedeman.github.io/categories/Python/"/>
    
    
      <category term="Type" scheme="http://spiedeman.github.io/tags/Type/"/>
    
      <category term="Object" scheme="http://spiedeman.github.io/tags/Object/"/>
    
  </entry>
  
  <entry>
    <title>在集群（CentOS 6.6）上安装YouCompleteMe</title>
    <link href="http://spiedeman.github.io/posts/3242500049/"/>
    <id>http://spiedeman.github.io/posts/3242500049/</id>
    <published>2018-12-08T16:25:58.000Z</published>
    <updated>2019-03-17T15:09:06.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><h1 id="准备工作"><a class="markdownIt-Anchor" href="#准备工作"></a> 准备工作</h1><h2 id="获取动态库"><a class="markdownIt-Anchor" href="#获取动态库"></a> 获取动态库</h2><p>安装<code>YouCompleteMe</code>所需的其实只有一个动态库文件<code>libclang.so.$version</code>。由于<code>YCM</code>一直在升级，对<code>clang</code>的版本要求也越来越高。<br>无奈官网最新的几个版本都没有给出<code>CentOS</code>的预编译包，只能下载官网<code>unknown-linux-gnu</code>版本或自行编译<code>clang</code>得到库文件。</p><p>实际尝试过后发现官网<code>unknown-linux-gnu</code>版本虽然可以编译通过，但是无法使用。因此只能选择自行编译<code>clang</code>，具体编译安装过程可以<a href="/posts/2372579481/" title="参考">参考</a>。</p><h2 id="配置gcc及g版本"><a class="markdownIt-Anchor" href="#配置gcc及g版本"></a> 配置gcc及g++版本</h2><p>由于集群默认<code>gcc</code>版本太低，故需切换高版本<code>gcc</code>并设置<code>CC</code>和<code>CXX</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CC=gcc</span><br><span class="line"><span class="built_in">export</span> CXX=g++</span><br><span class="line"><span class="comment"># 不做上述设置则需要添加 CMAKE 选项</span></span><br><span class="line"><span class="comment"># -DCMAKE_C_COMPILER=gcc</span></span><br><span class="line"><span class="comment"># —DCMAKE_CXX_COMPILER=g++</span></span><br></pre></td></tr></table></figure><h2 id="设置python版本"><a class="markdownIt-Anchor" href="#设置python版本"></a> 设置python版本</h2><p><code>YouCompleteMe</code>目前同时支持<code>python2</code>及<code>python3</code>，因此开启<code>vim</code>对<code>python2/3</code>的支持均可以。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换shell中python版本，使其与vim支持的一致</span></span><br><span class="line">pyenv shell 2.7.15</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">pyenv shell 3.6.6</span><br></pre></td></tr></table></figure><p><strong>问题</strong>：原本想编译<code>vim</code>使其同时支持<code>python2</code>和<code>python3</code>，但不知哪里出了问题，虽然显示同时支持，可实际上一个都不支持。</p><h1 id="安装-ycm"><a class="markdownIt-Anchor" href="#安装-ycm"></a> 安装 YCM</h1><h2 id="方法一"><a class="markdownIt-Anchor" href="#方法一"></a> 方法一</h2><p>使用自带安装脚本<code>install.py</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># YCM 通过sha256来判断是否需要从官网下载需要的库文件</span></span><br><span class="line"><span class="comment"># 为了避免自动下载，使其使用自行编译并打包的动态库</span></span><br><span class="line"><span class="comment"># 需要修改如下文件</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$HOME</span>/.vim/vim_plugin/YouCompleteMe/third_party/ycmd/cpp/ycm/</span><br><span class="line">vim CMakeLists.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改第74行，将该sha256值替换为自己的压缩文件的sha256值，保存并推出。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将打包的库文件放到如下目录中</span></span><br><span class="line">mv /path/to/my/libclang-<span class="variable">$version</span>-*.tar.bz2 ../../clang_archive/</span><br></pre></td></tr></table></figure><h2 id="方法二"><a class="markdownIt-Anchor" href="#方法二"></a> 方法二</h2><p>使用我自己写的脚本进行<code>Full Installation</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自定义路径</span></span><br><span class="line">pathbuild=<span class="variable">$HOME</span>/ycm_build</span><br><span class="line">pathdest=<span class="variable">$HOME</span>/.vim/vim_plugin/YouCompleteMe/third_party/ycmd/cpp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建目录 build</span></span><br><span class="line">[ -d <span class="variable">$pathbuild</span> ] &amp;&amp; rm -rf <span class="variable">$pathbuild</span></span><br><span class="line">mkdir <span class="variable">$pathbuild</span> &amp;&amp; <span class="built_in">cd</span> <span class="variable">$pathbuild</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始编译</span></span><br><span class="line">cmake -DCMAKE_C_COMPILER=gcc \</span><br><span class="line">    -DCMAKE_CXX_COMPILER=g++ \</span><br><span class="line">    -DUSE_PYTHON2=<span class="string">'OFF'</span> \</span><br><span class="line">    -DPYTHON_INCLUDE_DIR=<span class="variable">$HOME</span>/.pyenv/versions/3.6.6/include/python3.6m \</span><br><span class="line">    -DPYTHON_LIBRARY=<span class="variable">$HOME</span>/.pyenv/versions/3.6.6/lib/libpython3.6m.so \</span><br><span class="line">    -G <span class="string">"Unix Makefiles"</span> -DEXTERNAL_LIBCLANG_PATH=/path/to/libclang.so .  <span class="variable">$pathdest</span></span><br><span class="line"></span><br><span class="line">cmake --build . --target ycm_core --config Release</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除目录 build</span></span><br><span class="line">rm -rf <span class="variable">$pathbuild</span></span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;准备工作&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#准备工作&quot;&gt;&lt;/a&gt; 准备工作&lt;/h1&gt;&lt;h2 id=&quot;
      
    
    </summary>
    
      <category term="Vim" scheme="http://spiedeman.github.io/categories/Vim/"/>
    
    
      <category term="YouCompleteMe" scheme="http://spiedeman.github.io/tags/YouCompleteMe/"/>
    
  </entry>
  
  <entry>
    <title>CentOS6.6编译安装Clang7.0.0</title>
    <link href="http://spiedeman.github.io/posts/2372579481/"/>
    <id>http://spiedeman.github.io/posts/2372579481/</id>
    <published>2018-12-08T07:52:16.000Z</published>
    <updated>2019-03-17T15:09:06.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><h1 id="下载安装包"><a class="markdownIt-Anchor" href="#下载安装包"></a> 下载安装包</h1><p>编译安装<code>Clang</code>需要下载7个文件，分别是</p><p>1、<code>llvm-7.0.0.src.tar.xz</code><br>2、<code>cfe-7.0.0.src.tar.xz1</code><br>3、<code>clang-tools-extra-7.0.0.src.tar.xz</code><br>4、<code>compiler-rt-7.0.0.src.tar.xz</code><br>5、<code>libcxx-7.0.0.src.tar.xz</code><br>6、<code>libcxxabi-7.0.0.src.tar.xz</code><br>7、<code>libunwind-7.0.0.src.tar.xz</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">version=7.0.0</span><br><span class="line">url=http://releases.llvm.org/<span class="variable">$version</span></span><br><span class="line">file1=llvm-<span class="variable">$version</span>.src</span><br><span class="line">file2=cfe-<span class="variable">$version</span>.src</span><br><span class="line">file3=clang-tools-extra-<span class="variable">$version</span>.src</span><br><span class="line">file4=compiler-rt-<span class="variable">$version</span>.src</span><br><span class="line">file5=libcxx-<span class="variable">$version</span>.src</span><br><span class="line">file6=libcxxabi-<span class="variable">$version</span>.src</span><br><span class="line">file7=libunwind-<span class="variable">$version</span>.src</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$file</span>&#123;1..7&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    [ -f <span class="variable">$file</span>.tar.xz ] || wget <span class="variable">$url</span>/<span class="variable">$file</span>.tar.xz</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h1 id="编译安装"><a class="markdownIt-Anchor" href="#编译安装"></a> 编译安装</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入安装脚本所在的目录</span></span><br><span class="line">path=<span class="variable">$PWD</span>/<span class="variable">$0</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$&#123;path%/*&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取 clang 版本号</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> `ls .`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    [[ <span class="variable">$file</span> =~ <span class="string">"llvm"</span> ]] &amp;&amp; version=<span class="variable">$file</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">version=<span class="variable">$&#123;version/*-&#125;</span></span><br><span class="line">version=<span class="variable">$&#123;version%.src*&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建 build 目录</span></span><br><span class="line">mkdir build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$file</span>&#123;1..7&#125;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    tar xvf ../<span class="variable">$file</span>.tar.xz</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 移动目录</span></span><br><span class="line">mv <span class="variable">$file2</span> <span class="variable">$file1</span>/tools/clang</span><br><span class="line">mv <span class="variable">$file3</span> <span class="variable">$file1</span>/tools/clang/tools/extra</span><br><span class="line">mv <span class="variable">$file4</span> <span class="variable">$file1</span>/projects/compiler-rt</span><br><span class="line">mv <span class="variable">$file5</span> <span class="variable">$file1</span>/projects/libcxx</span><br><span class="line">mv <span class="variable">$file6</span> <span class="variable">$file1</span>/projects/libcxxabi</span><br><span class="line">mv <span class="variable">$file7</span> <span class="variable">$file1</span>/projects/libunwind</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译及安装</span></span><br><span class="line"><span class="comment"># 由于集群上默认gcc版本太低，所以必须切换到较高版本。</span></span><br><span class="line"><span class="comment"># 即便如此，仍需在shell中设定CC、CXX或者添加CMAKE选项指定C、CXX编译器才能通过检测</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> CC=gcc</span><br><span class="line"><span class="built_in">export</span> CXX=g++</span><br><span class="line"></span><br><span class="line"><span class="comment"># 若进行了上面的设置，则可省去选项 -DCMAKE_C_COMPILER 和 -DCMAKE_CXX_COMPILER</span></span><br><span class="line">cmake -G<span class="string">"Unix Makefiles"</span> \</span><br><span class="line">    -DCMAKE_CXX_COMPILER=/path/to/specified/g++ \</span><br><span class="line">    -DCMAKE_C_COMPILER=/path/to/specified/gcc \</span><br><span class="line">    -DCMAKE_INSTALL_PREFIX=/path/to/installation \</span><br><span class="line">    -DCMAKE_BUILD_TYPE=Release  \</span><br><span class="line">    -DLLVM_TARGETS_TO_BUILD=<span class="string">"X86"</span> \</span><br><span class="line">    <span class="variable">$file1</span></span><br><span class="line">    <span class="comment"># -DCLANG_DEFAULT_CXX_STDLIB=libc++ \</span></span><br><span class="line"></span><br><span class="line">make -j 4</span><br><span class="line">make install</span><br><span class="line">make install-cxx install-cxxabi</span><br></pre></td></tr></table></figure><h1 id="打包clang动态库"><a class="markdownIt-Anchor" href="#打包clang动态库"></a> 打包clang动态库</h1><p>手动安装<code>clang</code>的目的主要是为了安装<code>YouCompleteMe</code>，需要用到的其实就只有一个动态库文件<code>libclang.so.7</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir lib</span><br><span class="line">cp -l /path/to/installation/lib/libclang.so* lib</span><br><span class="line">tar -cjf libclang-<span class="variable">$version</span>-x86_64-unknown-linux-gnu.tar.bz2 lib</span><br><span class="line">rm -rf lib</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;下载安装包&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#下载安装包&quot;&gt;&lt;/a&gt; 下载安装包&lt;/h1&gt;&lt;p&gt;编译
      
    
    </summary>
    
      <category term="Clang" scheme="http://spiedeman.github.io/categories/Clang/"/>
    
    
      <category term="clang" scheme="http://spiedeman.github.io/tags/clang/"/>
    
      <category term="centos" scheme="http://spiedeman.github.io/tags/centos/"/>
    
  </entry>
  
  <entry>
    <title>vim 编译安装及配置</title>
    <link href="http://spiedeman.github.io/posts/3465068350/"/>
    <id>http://spiedeman.github.io/posts/3465068350/</id>
    <published>2018-12-08T06:56:12.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:59 GMT+0800 (中国标准时间) --><h1 id="下载源代码"><a class="markdownIt-Anchor" href="#下载源代码"></a> 下载源代码</h1><p>从<code>github</code>下载<code>vim</code>，好处是可以自由切换版本。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/vim/vim.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入 vim</span></span><br><span class="line"><span class="built_in">cd</span> vim</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前版本</span></span><br><span class="line">git describe --tags</span><br></pre></td></tr></table></figure><h1 id="编译安装"><a class="markdownIt-Anchor" href="#编译安装"></a> 编译安装</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 清除上次configure留下的痕迹</span></span><br><span class="line">make distclean</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新configure</span></span><br><span class="line">./configure \</span><br><span class="line">--prefix=/path/to/vim \</span><br><span class="line">--with-features=huge \</span><br><span class="line">--<span class="built_in">enable</span>-pythoninterp=yes \</span><br><span class="line">--<span class="built_in">enable</span>-python3interp=yes \</span><br><span class="line">--<span class="built_in">enable</span>-rubyinterp=yes \</span><br><span class="line">--<span class="built_in">enable</span>-luainterp=yes \</span><br><span class="line">--<span class="built_in">enable</span>-perlinterp=yes \</span><br><span class="line">--<span class="built_in">enable</span>-multibyte=yes \</span><br><span class="line">--<span class="built_in">enable</span>-cscope \</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h1 id="卸载"><a class="markdownIt-Anchor" href="#卸载"></a> 卸载</h1><p><code>vim</code>的<code>Makefile</code>提供了<code>uninstall</code>选项，因此卸载很容易。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> vim &amp;&amp; make uninstall</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:59 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;下载源代码&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#下载源代码&quot;&gt;&lt;/a&gt; 下载源代码&lt;/h1&gt;&lt;p&gt;从&lt;
      
    
    </summary>
    
      <category term="Vim" scheme="http://spiedeman.github.io/categories/Vim/"/>
    
    
      <category term="vim" scheme="http://spiedeman.github.io/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>Homebrew 使用方法</title>
    <link href="http://spiedeman.github.io/posts/319510325/"/>
    <id>http://spiedeman.github.io/posts/319510325/</id>
    <published>2018-12-04T13:55:23.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><h1 id="查看已安装的包"><a class="markdownIt-Anchor" href="#查看已安装的包"></a> 查看已安装的包</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew list</span><br></pre></td></tr></table></figure><h1 id="更新-homebrew"><a class="markdownIt-Anchor" href="#更新-homebrew"></a> 更新 Homebrew</h1><p>要获取最新的包列表，需先更新 <code>Homebrew</code> 自身。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br></pre></td></tr></table></figure><h1 id="更新包formula"><a class="markdownIt-Anchor" href="#更新包formula"></a> 更新包（formula）</h1><p>查看哪些包有新版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew outdated</span><br><span class="line"></span><br><span class="line">brew upgrade                <span class="comment"># 更新左右包</span></span><br><span class="line">brew upgrade <span class="variable">$FORMULA</span>       <span class="comment"># 更新指定包</span></span><br></pre></td></tr></table></figure><p>更新时自动清理旧版本，在<code>brew upgrade</code>前设置环境变量<code>HOMEBREW_UPGRADE_CLEANUP</code>。</p><h1 id="清理旧版本"><a class="markdownIt-Anchor" href="#清理旧版本"></a> 清理旧版本</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew cleanup                <span class="comment"># 清理所有包的旧版本</span></span><br><span class="line">brew cleanup <span class="variable">$FORMULA</span>       <span class="comment"># 清理指定包的旧版本</span></span><br><span class="line">brew cleanup -n             <span class="comment"># 查看可清理的旧版本包，不会执行清除操作</span></span><br></pre></td></tr></table></figure><p>彻底卸载，包括删除旧版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew uninstall formaula_name --force</span><br></pre></td></tr></table></figure><h1 id="锁定包"><a class="markdownIt-Anchor" href="#锁定包"></a> 锁定包</h1><p>被锁定的包在更新时会被略过。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew pin <span class="variable">$FORMULA</span>           <span class="comment"># 锁定</span></span><br><span class="line">brew unpin <span class="variable">$FORMULA</span>         <span class="comment"># 取消锁定</span></span><br></pre></td></tr></table></figure><h1 id="切换版本"><a class="markdownIt-Anchor" href="#切换版本"></a> 切换版本</h1><p>时间一长，各个包可能都有多个版本并存。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew switch <span class="variable">$FORMULA</span> <span class="variable">$VERSION</span>       <span class="comment"># 切换包到指定版本</span></span><br></pre></td></tr></table></figure><h1 id="查看依赖关系"><a class="markdownIt-Anchor" href="#查看依赖关系"></a> 查看依赖关系</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew deps --installed --tree        <span class="comment"># 查看已安装的包的依赖关系</span></span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;查看已安装的包&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#查看已安装的包&quot;&gt;&lt;/a&gt; 查看已安装的包&lt;/h1
      
    
    </summary>
    
      <category term="Homebrew" scheme="http://spiedeman.github.io/categories/Homebrew/"/>
    
    
      <category term="homebrew" scheme="http://spiedeman.github.io/tags/homebrew/"/>
    
  </entry>
  
  <entry>
    <title>euler-lagrange-equation</title>
    <link href="http://spiedeman.github.io/posts/4141491110/"/>
    <id>http://spiedeman.github.io/posts/4141491110/</id>
    <published>2018-12-02T12:12:33.000Z</published>
    <updated>2019-03-17T15:09:06.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><h1 id="作用量"><a class="markdownIt-Anchor" href="#作用量"></a> 作用量</h1><p>作用量 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.05764em">S</span></span></span></span> 是拉氏密度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="script">L</mi></mrow><annotation encoding="application/x-tex">\mathcal{L}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span> 在四维时空中的积分，</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>=</mo><mfrac><mn>1</mn><mi>c</mi></mfrac><mo>∫</mo><msup><mi>d</mi><mn>4</mn></msup><mi>x</mi><mi mathvariant="script">L</mi><mo>(</mo><mi>ϕ</mi><mo separator="true">,</mo><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">S = \frac{1}{c}\int d^4x \mathcal{L}(\phi,\partial_\mu\phi)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.05764em">S</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.22225em;vertical-align:-.86225em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">c</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mop op-symbol large-op" style="margin-right:.44445em;position:relative;top:-.0011249999999999316em">∫</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8641079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord mathdefault">x</span><span class="mord"><span class="mord mathcal">L</span></span><span class="mopen">(</span><span class="mord mathdefault">ϕ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">μ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mclose">)</span></span></span></span></span></p><h1 id="场的变分"><a class="markdownIt-Anchor" href="#场的变分"></a> 场的变分</h1><p>对场的变分的贡献共来自两个方面，1、坐标无穷小变换；2、场自身的无穷小变换。下面分别讨论这两种情况。</p><p>1、坐标无穷小变换</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mi>μ</mi></msup><mo>→</mo><msup><mi>x</mi><mrow><mo mathvariant="normal">′</mo><mi>μ</mi></mrow></msup><mo>=</mo><msup><mi>x</mi><mi>μ</mi></msup><mo>+</mo><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup></mrow><annotation encoding="application/x-tex">x^{\mu}\rightarrow x&#x27;^{\mu}= x^{\mu} + \delta x^{\mu}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.714392em;vertical-align:0"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.801892em;vertical-align:0"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.801892em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.797722em;vertical-align:-.08333em"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.714392em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>通常谈论的场的变分是指坐标不变时的变分 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover></mrow><annotation encoding="application/x-tex">\bar{\delta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8312199999999998em;vertical-align:0"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span></span></span></span>，</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msup><mi>ϕ</mi><mo mathvariant="normal">′</mo></msup><mo>(</mo><mi>x</mi><mo>)</mo><mo>−</mo><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\bar{\delta}\phi(x) = \phi&#x27;(x) - \phi(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0812199999999998em;vertical-align:-.25em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.051892em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.801892em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span></span></p><p>根据标量场 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\phi(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span> 在坐标变换下的性质 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>ϕ</mi><mo mathvariant="normal">′</mo></msup><mo>(</mo><msup><mi>x</mi><mo mathvariant="normal">′</mo></msup><mo>)</mo><mo>=</mo><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\phi&#x27;(x&#x27;)=\phi(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.751892em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.751892em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>，容易得到</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi>ϕ</mi><mo>=</mo><mo>−</mo><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\bar{\delta}\phi = -\delta x^{\mu}\partial_{\mu}\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0256599999999998em;vertical-align:-.19444em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.0005em;vertical-align:-.286108em"></span><span class="mord">−</span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span></span></span></span></span></p><p>2、场自身的无穷小变换<br>在没有坐标变换的情况下，场 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault">ϕ</span></span></span></span> 产生了一个无穷小变换。此时坐标不变时的变分为</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi>ϕ</mi><mo>=</mo><msup><mi>ϕ</mi><mo mathvariant="normal">′</mo></msup><mo>(</mo><mi>x</mi><mo>)</mo><mo>−</mo><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mi>δ</mi><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\bar{\delta}\phi = \phi&#x27;(x) - \phi(x) = \delta\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0256599999999998em;vertical-align:-.19444em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.051892em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.801892em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord mathdefault">ϕ</span></span></span></span></span></p><p>注意到这里用 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span></span> 表示场自身的变分。通常情况下遇到的变分就是这种情况。</p><p>3、一般情况<br>如果同时考虑到<strong>坐标变换</strong>以及<strong>场自身的变分</strong>，则标量场 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\phi(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span> 满足的性质需修改为</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>ϕ</mi><mo mathvariant="normal">′</mo></msup><mo>(</mo><msup><mi>x</mi><mo mathvariant="normal">′</mo></msup><mo>)</mo><mo>=</mo><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>+</mo><mi>δ</mi><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\phi&#x27;(x&#x27;) = \phi(x) + \delta\phi(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.051892em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.801892em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.801892em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span></span></p><p>故坐标不变时的变分为</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi>ϕ</mi><mo mathvariant="normal">′</mo></msup><mo>(</mo><mi>x</mi><mo>)</mo><mo>−</mo><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>−</mo><mi>δ</mi><mi>x</mi><mo>)</mo><mo>+</mo><mi>δ</mi><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>−</mo><mi>δ</mi><mi>x</mi><mo>)</mo><mo>−</mo><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≈</mo><mi>δ</mi><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>−</mo><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} \bar{\delta}\phi(x) &amp;= \phi&#x27;(x) - \phi(x) \\ &amp;= \phi(x-\delta{x}) + \delta\phi(x-\delta{x}) - \phi(x) \\ &amp;\approx \delta\phi(x) - \delta{x^\mu}\partial_{\mu}\phi(x) \\ \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.500000000000002em;vertical-align:-2.000000000000001em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em"><span style="top:-4.66em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-3.16em"><span class="pstrut" style="height:3em"></span><span class="mord"></span></span><span style="top:-1.6599999999999993em"><span class="pstrut" style="height:3em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em"><span style="top:-4.66em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord"><span class="mord mathdefault">ϕ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.801892em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-3.16em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-1.6599999999999993em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>根据上述讨论可知，场自身的变分一般情况下并非坐标不变时的变分 (<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi mathvariant="normal">≠</mi><mi>δ</mi></mrow><annotation encoding="application/x-tex">\bar{\delta} \neq \delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0256599999999998em;vertical-align:-.19444em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.69444em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="rlap"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.19444em"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span></span>)，<br>只有当不存在坐标变换的情况下两者才相等 (<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mo>=</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">\bar{\delta} = \delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8312199999999998em;vertical-align:0"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span></span>)。</p><h2 id="拉氏密度的变分"><a class="markdownIt-Anchor" href="#拉氏密度的变分"></a> 拉氏密度的变分</h2><p>一般情况下，作为标量场的拉氏密度的坐标不变时的变分为</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi mathvariant="script">L</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msup><mi mathvariant="script">L</mi><mo mathvariant="normal">′</mo></msup><mo>(</mo><mi>x</mi><mo>)</mo><mo>−</mo><mi mathvariant="script">L</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi mathvariant="script">L</mi><mo>(</mo><mi>x</mi><mo>−</mo><mi>δ</mi><mi>x</mi><mo>)</mo><mo>−</mo><mi>δ</mi><mi mathvariant="script">L</mi><mo>(</mo><mi>x</mi><mo>−</mo><mi>δ</mi><mi>x</mi><mo>)</mo><mo>−</mo><mi mathvariant="script">L</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>δ</mi><mi mathvariant="script">L</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>−</mo><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi mathvariant="script">L</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>ϕ</mi></mrow></mfrac><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi>ϕ</mi><mo>+</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi></mrow></mfrac><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} \bar{\delta}\mathcal{L}(x) &amp;= \mathcal{L}&#x27;(x) - \mathcal{L}(x) \\ &amp;= \mathcal{L}(x-\delta x) - \delta\mathcal{L}(x-\delta x) - \mathcal{L}(x) \\ &amp;= \delta\mathcal{L}(x) - \delta{x^\mu}\partial_{\mu}\mathcal{L} \\ &amp;= \frac{\partial\mathcal{L}}{\partial\phi}\bar{\delta}\phi + \frac{\partial\mathcal{L}}{\partial\partial_{\mu}\phi}\bar{\delta}\partial_{\mu}\phi \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.143548000000002em;vertical-align:-3.3217740000000013em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8217740000000004em"><span style="top:-6.353214em"><span class="pstrut" style="height:3.3714399999999998em"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord"><span class="mord mathcal">L</span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-4.8532139999999995em"><span class="pstrut" style="height:3.3714399999999998em"></span><span class="mord"></span></span><span style="top:-3.3532139999999986em"><span class="pstrut" style="height:3.3714399999999998em"></span><span class="mord"></span></span><span style="top:-1.3217739999999985em"><span class="pstrut" style="height:3.3714399999999998em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.3217740000000013em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.8217740000000004em"><span style="top:-6.353214em"><span class="pstrut" style="height:3.3714399999999998em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord"><span class="mord"><span class="mord mathcal">L</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.801892em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mord mathcal">L</span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-4.8532139999999995em"><span class="pstrut" style="height:3.3714399999999998em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord"><span class="mord mathcal">L</span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathcal">L</span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mord mathcal">L</span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span><span style="top:-3.3532139999999986em"><span class="pstrut" style="height:3.3714399999999998em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathcal">L</span></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathcal">L</span></span></span></span><span style="top:-1.3217739999999985em"><span class="pstrut" style="height:3.3714399999999998em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.8804400000000001em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.972108em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.3217740000000013em"><span></span></span></span></span></span></span></span></span></span></span></span></p><h2 id="作用量的变分"><a class="markdownIt-Anchor" href="#作用量的变分"></a> 作用量的变分</h2><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>δ</mi><mi>S</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>∫</mo><mi>δ</mi><mo>(</mo><msup><mi>d</mi><mn>4</mn></msup><mi>x</mi><mo>)</mo><mi mathvariant="script">L</mi><mo>+</mo><mo>∫</mo><msup><mi>d</mi><mn>4</mn></msup><mi>x</mi><mtext></mtext><mi>δ</mi><mi mathvariant="script">L</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>∫</mo><msup><mi>d</mi><mn>4</mn></msup><mi>x</mi><mrow><mo fence="true">(</mo><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi mathvariant="script">L</mi><mo>+</mo><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi mathvariant="script">L</mi><mo>+</mo><mi mathvariant="script">L</mi><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>∫</mo><msup><mi>d</mi><mn>4</mn></msup><mi>x</mi><mrow><mo fence="true">(</mo><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi mathvariant="script">L</mi><mo>+</mo><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mo>(</mo><mi mathvariant="script">L</mi><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup><mo>)</mo><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>∫</mo><msup><mi>d</mi><mn>4</mn></msup><mi>x</mi><mrow><mo fence="true">(</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>ϕ</mi></mrow></mfrac><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi>ϕ</mi><mo>+</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi></mrow></mfrac><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi><mo>+</mo><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mo>(</mo><mi mathvariant="script">L</mi><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup><mo>)</mo><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo>∫</mo><msup><mi>d</mi><mn>4</mn></msup><mi>x</mi><mrow><mo fence="true">[</mo><mrow><mo fence="true">(</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>ϕ</mi></mrow></mfrac><mo>−</mo><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi></mrow></mfrac><mo fence="true">)</mo></mrow><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi>ϕ</mi><mo>+</mo><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mrow><mo fence="true">(</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi></mrow></mfrac><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi>ϕ</mi><mo>+</mo><mi mathvariant="script">L</mi><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup><mo fence="true">)</mo></mrow><mo fence="true">]</mo></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} \delta S &amp;= \int \delta(d^4 x)\mathcal{L} + \int d^4 x\, \delta{\mathcal{L}} \\ &amp;= \int d^4x \left(\bar{\delta}\mathcal{L}+\delta x^{\mu}\partial_{\mu}{\mathcal{L}} + \mathcal{L}\partial_{\mu}\delta{x^\mu}\right) \\ &amp;= \int d^4x \left(\bar{\delta}\mathcal{L} + \partial_{\mu}(\mathcal{L}\delta x^{\mu})\right) \\ &amp;= \int d^4x \left(\frac{\partial\mathcal{L}}{\partial\phi}\bar{\delta}\phi + \frac{\partial\mathcal{L}}{\partial\partial_{\mu}\phi}\bar{\delta}\partial_{\mu}\phi + \partial_{\mu}(\mathcal{L}\delta x^{\mu})\right) \\ &amp;= \int d^4x \left[\left(\frac{\partial\mathcal{L}}{\partial\phi} - \partial_{\mu}\frac{\partial\mathcal{L}}{\partial\partial_{\mu}\phi}\right)\bar{\delta}\phi + \partial_{\mu}\left(\frac{\partial\mathcal{L}}{\partial\partial_{\mu}\phi}\bar{\delta}\phi+\mathcal{L}\delta x^{\mu}\right) \right] \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:13.010966em;vertical-align:-6.255483000000002em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.755482999999998em"><span style="top:-8.845482999999998em"><span class="pstrut" style="height:3.45em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord mathdefault" style="margin-right:.05764em">S</span></span></span><span style="top:-6.323232999999999em"><span class="pstrut" style="height:3.45em"></span><span class="mord"></span></span><span style="top:-3.800982999999998em"><span class="pstrut" style="height:3.45em"></span><span class="mord"></span></span><span style="top:-1.1887329999999976em"><span class="pstrut" style="height:3.45em"></span><span class="mord"></span></span><span style="top:1.5333750000000015em"><span class="pstrut" style="height:3.45em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:6.255483000000002em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.755482999999998em"><span style="top:-8.845482999999998em"><span class="pstrut" style="height:3.45em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mop op-symbol large-op" style="margin-right:.44445em;position:relative;top:-.0011249999999999316em">∫</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8641079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord"><span class="mord mathcal">L</span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mop op-symbol large-op" style="margin-right:.44445em;position:relative;top:-.0011249999999999316em">∫</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8641079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span style="top:-6.323232999999999em"><span class="pstrut" style="height:3.45em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mop op-symbol large-op" style="margin-right:.44445em;position:relative;top:-.0011249999999999316em">∫</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8641079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="minner"><span class="mopen delimcenter" style="top:0"><span class="delimsizing size1">(</span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord"><span class="mord mathcal">L</span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord mathcal">L</span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mord mathcal">L</span></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0"><span class="delimsizing size1">)</span></span></span></span></span><span style="top:-3.800982999999998em"><span class="pstrut" style="height:3.45em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mop op-symbol large-op" style="margin-right:.44445em;position:relative;top:-.0011249999999999316em">∫</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8641079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="minner"><span class="mopen delimcenter" style="top:0"><span class="delimsizing size1">(</span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord"><span class="mord mathcal">L</span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathcal">L</span></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0"><span class="delimsizing size1">)</span></span></span></span></span><span style="top:-1.1887329999999976em"><span class="pstrut" style="height:3.45em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mop op-symbol large-op" style="margin-right:.44445em;position:relative;top:-.0011249999999999316em">∫</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8641079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="minner"><span class="mopen delimcenter" style="top:0"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.8804400000000001em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.972108em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathcal">L</span></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0"><span class="delimsizing size3">)</span></span></span></span></span><span style="top:1.5333750000000015em"><span class="pstrut" style="height:3.45em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mop op-symbol large-op" style="margin-right:.44445em;position:relative;top:-.0011249999999999316em">∫</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8641079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="minner"><span class="mopen delimcenter" style="top:0"><span class="delimsizing size3">[</span></span><span class="minner"><span class="mopen delimcenter" style="top:0"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.8804400000000001em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.972108em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="minner"><span class="mopen delimcenter" style="top:0"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.972108em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mord mathcal">L</span></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0"><span class="delimsizing size3">)</span></span></span><span class="mclose delimcenter" style="top:0"><span class="delimsizing size3">]</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:6.255483000000002em"><span></span></span></span></span></span></span></span></span></span></span></span></p><h2 id="拉格朗日方程"><a class="markdownIt-Anchor" href="#拉格朗日方程"></a> 拉格朗日方程</h2><p>假设坐标不变，只考虑场量的变分，则有</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi>ϕ</mi><mo>=</mo><mi>δ</mi><mi>ϕ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} &amp; \bar{\delta}\phi = \delta\phi \\ &amp; \delta x^{\mu} = 0 \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.0000000000000004em;vertical-align:-1.2500000000000002em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em"><span style="top:-3.75em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span><span style="top:-2.25em"><span class="pstrut" style="height:2.84em"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em"><span style="top:-3.91em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>由表面项在4维时空边界上为零及变分 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\bar{\delta}\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0256599999999998em;vertical-align:-.19444em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord mathdefault">ϕ</span></span></span></span> 任意，作用量的变分取极值的条件给出拉格朗日方程</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi></mrow></mfrac><mo>−</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>ϕ</mi></mrow></mfrac><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\partial_{\mu}\frac{\partial\mathcal{L}}{\partial\partial_{\mu}\phi} - \frac{\partial\mathcal{L}}{\partial\phi} = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.343548em;vertical-align:-.972108em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.972108em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:2.25188em;vertical-align:-.8804400000000001em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.8804400000000001em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">0</span></span></span></span></span></p><h2 id="诺特定理"><a class="markdownIt-Anchor" href="#诺特定理"></a> 诺特定理</h2><p>若场 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϕ</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\phi(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">ϕ</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span><br>满足拉格朗日方程，则作用量的变分为某个表面项的4维积分。若场在变换（包括坐标变换和自身变换）前后均满足拉格朗日方程，且保持作用量不变。则<br>由</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>δ</mi><mi>S</mi><mo>=</mo><mfrac><mn>1</mn><mi>c</mi></mfrac><mo>∫</mo><msup><mi>d</mi><mn>4</mn></msup><mi>x</mi><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><msup><mi>j</mi><mi>μ</mi></msup><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\delta S = \frac{1}{c} \int d^4x \partial_{\mu}j^{\mu} = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord mathdefault" style="margin-right:.05764em">S</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.22225em;vertical-align:-.86225em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">c</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mop op-symbol large-op" style="margin-right:.44445em;position:relative;top:-.0011249999999999316em">∫</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8641079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord mathdefault">x</span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:.05724em">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">0</span></span></span></span></span></p><p>以及</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>j</mi><mi>μ</mi></msup><mo>=</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi></mrow></mfrac><mover accent="true"><mi>δ</mi><mo>ˉ</mo></mover><mi>ϕ</mi><mo>+</mo><mi mathvariant="script">L</mi><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup></mrow><annotation encoding="application/x-tex">j^{\mu} = \frac{\partial\mathcal{L}}{\partial\partial_{\mu}\phi}\bar{\delta}\phi + \mathcal{L}\delta x^{\mu}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9088320000000001em;vertical-align:-.19444em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.05724em">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.343548em;vertical-align:-.972108em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.972108em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8312199999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.19444em">ˉ</span></span></span></span></span></span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.714392em;vertical-align:0"></span><span class="mord"><span class="mord mathcal">L</span></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>得到一个对应该变换的守恒流 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>j</mi><mi>μ</mi></msup></mrow><annotation encoding="application/x-tex">j^{\mu}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.858832em;vertical-align:-.19444em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.05724em">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.664392em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span></span></span></span>。将 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>j</mi><mi>μ</mi></msup></mrow><annotation encoding="application/x-tex">j^{\mu}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.858832em;vertical-align:-.19444em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.05724em">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.664392em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span></span></span></span> 改写为</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>j</mi><mi>μ</mi></msup><mo>=</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi></mrow></mfrac><mi>δ</mi><mi>ϕ</mi><mo>−</mo><mrow><mo fence="true">(</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi mathvariant="script">L</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi mathvariant="normal">∂</mi><mi>μ</mi></msub><mi>ϕ</mi></mrow></mfrac><msub><mi mathvariant="normal">∂</mi><mi>ν</mi></msub><mo>−</mo><mi mathvariant="script">L</mi><msubsup><mi>g</mi><mi>ν</mi><mi>μ</mi></msubsup><mo fence="true">)</mo></mrow><mi>δ</mi><msup><mi>x</mi><mi>ν</mi></msup></mrow><annotation encoding="application/x-tex">j^{\mu} = \frac{\partial\mathcal{L}}{\partial\partial_{\mu}\phi}\delta\phi - \left(\frac{\partial\mathcal{L}}{\partial\partial_{\mu}\phi}\partial_{\nu} - \mathcal{L}g^{\mu}_{\nu}\right)\delta x^{\nu}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9088320000000001em;vertical-align:-.19444em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.05724em">j</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.714392em"><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.343548em;vertical-align:-.972108em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.972108em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord mathdefault">ϕ</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:2.4221079999999997em;vertical-align:-.972108em"></span><span class="minner"><span class="mopen delimcenter" style="top:0"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mord mathdefault">ϕ</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="mord"><span class="mord mathcal">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.972108em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord" style="margin-right:.05556em">∂</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.151392em"><span style="top:-2.5500000000000003em;margin-left:-.05556em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:.06366em">ν</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mord mathcal">L</span></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03588em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.7143919999999999em"><span style="top:-2.4530000000000003em;margin-left:-.03588em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:.06366em">ν</span></span></span></span><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.7143919999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:.06366em">ν</span></span></span></span></span></span></span></span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>δ</mi><mi>ϕ</mi></mrow><annotation encoding="application/x-tex">\delta\phi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord mathdefault">ϕ</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>δ</mi><msup><mi>x</mi><mi>μ</mi></msup></mrow><annotation encoding="application/x-tex">\delta x^{\mu}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.664392em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">μ</span></span></span></span></span></span></span></span></span></span></span></span> 现在是保持拉格朗日方程不变的变换。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;作用量&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#作用量&quot;&gt;&lt;/a&gt; 作用量&lt;/h1&gt;&lt;p&gt;作用量 &lt;spa
      
    
    </summary>
    
      <category term="QFT" scheme="http://spiedeman.github.io/categories/QFT/"/>
    
    
      <category term="最小作用量" scheme="http://spiedeman.github.io/tags/%E6%9C%80%E5%B0%8F%E4%BD%9C%E7%94%A8%E9%87%8F/"/>
    
      <category term="诺特定理" scheme="http://spiedeman.github.io/tags/%E8%AF%BA%E7%89%B9%E5%AE%9A%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Mac下安装Python版CAMB</title>
    <link href="http://spiedeman.github.io/posts/3538923028/"/>
    <id>http://spiedeman.github.io/posts/3538923028/</id>
    <published>2018-11-26T09:48:03.000Z</published>
    <updated>2019-03-17T15:09:06.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><h1 id="安装过程遇到的坑"><a class="markdownIt-Anchor" href="#安装过程遇到的坑"></a> 安装过程遇到的坑</h1><p><code>camb</code>的最新版已经支持<code>Intel Fortran</code>编译器进行编译。然而编译<code>python</code>版本<code>camb</code>的过程中会遇到不少问题。</p><p>1、编译选项冲突<br>查看<code>Makefile</code>发现，<code>MacOS</code>平台下<code>camb</code>共享库<code>camblib.so</code>的编译选项中<code>SFFLAGS</code>保持默认会出现编译错误。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -fminshared 与 -fpic 选项冲突</span></span><br><span class="line"><span class="comment"># 修改为</span></span><br><span class="line">SFFLAGS = -dynamiclib</span><br></pre></td></tr></table></figure><p>2、动态库加载错误<br>修改<code>Makefile</code>之后，编译没有问题，但是在<code>Python</code>中<code>import</code>时会出现库未加载的错误。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">OSError:</span><br><span class="line">dlopen(/Users/xuwutao/.pyenv/versions/<span class="number">3.7</span><span class="number">.1</span>/envs/science/lib/python3<span class="number">.7</span>/site-packages/camb/camblib.so, <span class="number">6</span>): Library <span class="keyword">not</span> loaded: @rpath/libiomp5.dylib</span><br><span class="line">  Referenced <span class="keyword">from</span> : /Users/xuwutao/.pyenv/versions/<span class="number">3.7</span><span class="number">.1</span>/envs/science/lib/python3<span class="number">.7</span>/site-packages/camb/camblib.so</span><br><span class="line">  Reason: image <span class="keyword">not</span> found</span><br></pre></td></tr></table></figure><p>解决办法：<br>将<code>libiomp5.dylib</code>所在的目录加入<code>@rpath</code>中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install_name_tool -add_rpath /Users/xuwutao/Program/intel/2018/compilers_and_libraries_2018.1.126/mac/compiler/lib /Users/xuwutao/.pyenv/versions/3.7.1/envs/science/lib/python3.7/site-packages/camb/camblib.so</span><br></pre></td></tr></table></figure><h1 id="疑问"><a class="markdownIt-Anchor" href="#疑问"></a> 疑问</h1><p>原以为设置好<code>DYLD_LIBRARY_PATH</code>就没有问题，没想到还需要设置<code>@rpath</code>。估计和<code>Mac</code>下动态库的加载机制有关，详细情况以后有时间再研究吧。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;安装过程遇到的坑&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#安装过程遇到的坑&quot;&gt;&lt;/a&gt; 安装过程遇到的坑&lt;
      
    
    </summary>
    
      <category term="python" scheme="http://spiedeman.github.io/categories/python/"/>
    
    
      <category term="python" scheme="http://spiedeman.github.io/tags/python/"/>
    
      <category term="camb" scheme="http://spiedeman.github.io/tags/camb/"/>
    
  </entry>
  
  <entry>
    <title>jupyter-with-virtualenv</title>
    <link href="http://spiedeman.github.io/posts/3264731549/"/>
    <id>http://spiedeman.github.io/posts/3264731549/</id>
    <published>2018-11-26T05:36:56.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><h1 id="添加内核"><a class="markdownIt-Anchor" href="#添加内核"></a> 添加内核</h1><p>终端切换<code>python</code>版本很容易，但在<code>jupyter</code>中应该如何切换环境？</p><p>假如有一个虚拟环境<code>science</code>，将其导入<code>jupyter</code>的过程如下：</p><p>1、进入虚拟环境<code>science</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv active science</span><br></pre></td></tr></table></figure><p>2、安装<code>ipykernel</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install ipykernel</span><br></pre></td></tr></table></figure><p>3、为<code>jupyter</code>安装新内核</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipython kernel install --user --name science -display-name <span class="string">"python3 (science)"</span></span><br></pre></td></tr></table></figure><p>4、查看可用内核</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jupyter-kernelspec list</span><br><span class="line"></span><br><span class="line">Available kernerls:</span><br><span class="line">  science    /Users/xuwutao/Library/Jupyter/kernels/science</span><br><span class="line">  python3 /Users/xuwutao/.pyenv/versions/3.7.1/Python.framework/Versions/3.7/share/jupyter/kernels/python3</span><br></pre></td></tr></table></figure><img src="/posts/3264731549/jupyter-with-virtualenv.png" width="400" height="400"><h1 id="修改内核"><a class="markdownIt-Anchor" href="#修改内核"></a> 修改内核</h1><p>内核在<code>jupyter</code>中以<code>json</code>文件方式存在。每新建一个内核，<code>jupyter</code>会在系统的特定位置新建文件夹，存储相应的<code>json</code>文件。这些位置分布如下：</p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">Unix</th><th style="text-align:center">Windows</th></tr></thead><tbody><tr><td style="text-align:center"><code>System</code></td><td style="text-align:center"><code>/usr/share/jupyter/kernels</code><br><code>/usr/local/share/jupyter/kernels</code></td><td style="text-align:center"><code>%PROGRAMDATA\jupyter\kernels</code></td></tr><tr><td style="text-align:center"><code>Env</code></td><td style="text-align:center"><code>{sys.prefix}/share/jupyter/kernels</code></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><code>User</code></td><td style="text-align:center"><code>~/Library/Jupyter/kernels</code> (Mac)<br><code>~/.local/share/jupyter/kernels</code> (Linux)</td><td style="text-align:center"><code>%APPDATA%\jupyter\kernels</code></td></tr></tbody></table><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;添加内核&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#添加内核&quot;&gt;&lt;/a&gt; 添加内核&lt;/h1&gt;&lt;p&gt;终端切换&lt;
      
    
    </summary>
    
      <category term="Python" scheme="http://spiedeman.github.io/categories/Python/"/>
    
    
      <category term="jupyter" scheme="http://spiedeman.github.io/tags/jupyter/"/>
    
      <category term="virtualenv" scheme="http://spiedeman.github.io/tags/virtualenv/"/>
    
  </entry>
  
  <entry>
    <title>树莓派新手指南</title>
    <link href="http://spiedeman.github.io/posts/2712929324/"/>
    <id>http://spiedeman.github.io/posts/2712929324/</id>
    <published>2018-11-18T11:12:14.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><h1 id="刻录系统"><a class="markdownIt-Anchor" href="#刻录系统"></a> 刻录系统</h1><p>选好合适的系统镜像之后，用<code>dd</code>命令刻录系统到 <code>sd</code> 卡中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd bs=16M <span class="keyword">if</span>=/path/to/img of=/dev/sdc</span><br></pre></td></tr></table></figure><p>Mac系统下类似，主要注意输出文件是<code>/dev/sdc</code>而不是<code>sd</code>卡上的分区。</p><h1 id="开启ssh"><a class="markdownIt-Anchor" href="#开启ssh"></a> 开启SSH</h1><p>最新版树莓派系统默认不开启<code>ssh</code>服务。没有显示器的情况下，这是不能忍的。好在有一个简单的办法可以解决，系统刻录完成后在<code>boot</code>分区下新建名为<code>ssh</code>的空白文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 挂载并进入boot分区</span></span><br><span class="line">touch ssh</span><br></pre></td></tr></table></figure><h1 id="启动树莓派"><a class="markdownIt-Anchor" href="#启动树莓派"></a> 启动树莓派</h1><p>用网线连接树莓派和Mac，打开Mac终端，通过<code>ssh</code>连接树莓派。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将公钥加入远程主机的 authorized_keys 文件中，实现无密码登陆</span></span><br><span class="line">ssh-copy-id pi@raspberrypi</span><br></pre></td></tr></table></figure><h1 id="初始化配置"><a class="markdownIt-Anchor" href="#初始化配置"></a> 初始化配置</h1><p>输入命令 <code>sudo raspi-config</code> 进入配置模式。常用的有扩展系统分区，修改密码，启动设置等。</p><h1 id="修改swap空间大小"><a class="markdownIt-Anchor" href="#修改swap空间大小"></a> 修改swap空间大小</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改文件</span></span><br><span class="line">sudo vim /etc/dphys-swapfile</span><br><span class="line"><span class="comment"># 把 CONF_SWAPSIZE=100 改成需要的大小，单位是m</span></span><br><span class="line"><span class="comment"># 重启dphys-swapfile服务</span></span><br><span class="line">sudo service dphys-swapfile restart</span><br></pre></td></tr></table></figure><p>查看当前swap空间</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">free -m</span><br></pre></td></tr></table></figure><h1 id="vnc-远程桌面"><a class="markdownIt-Anchor" href="#vnc-远程桌面"></a> VNC 远程桌面</h1><p>树莓派自带<code>VNC</code>服务器，通过配置实现远程图形化界面登陆。</p><p><a href="https://www.raspberrypi.org/documentation/remote-access/vnc/" target="_blank" rel="noopener">树莓派官方VNC教程</a></p><h1 id="debian-安装后必做的几件事"><a class="markdownIt-Anchor" href="#debian-安装后必做的几件事"></a> debian 安装后必做的几件事</h1><p>1、安装<code>shadowsocks</code>。注意<code>pip</code>安装时不要<code>--user</code>选项。配置服务，开机自启动。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装最新版 shadowsocks</span></span><br><span class="line">pip install https://github.com/shadowsocks/shadowsocks/archive/master.zip</span><br></pre></td></tr></table></figure><p>pip更新之后可能会遇到问题<code>can not import name main</code><br>修改 /usr/bin/pip 文件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改前</span></span><br><span class="line"><span class="keyword">from</span> pip <span class="keyword">import</span> main</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    sys.exit(main())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改后</span></span><br><span class="line"><span class="keyword">from</span> pip <span class="keyword">import</span> __main__</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    sys.exit(__main__.main())</span><br></pre></td></tr></table></figure><hr><p>2、安装<code>pyenv</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/pyenv/pyenv.git ~/.pyenv</span><br></pre></td></tr></table></figure><p>详细内容参见文章 <a href="/posts/1952119038/" title="pyenv基础教程">pyenv基础教程</a></p><hr><p>3、安装字体，VNC连接时视觉上不能遭罪。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;刻录系统&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#刻录系统&quot;&gt;&lt;/a&gt; 刻录系统&lt;/h1&gt;&lt;p&gt;选好合适的
      
    
    </summary>
    
      <category term="Raspberrypi" scheme="http://spiedeman.github.io/categories/Raspberrypi/"/>
    
    
      <category term="Raspberrypi" scheme="http://spiedeman.github.io/tags/Raspberrypi/"/>
    
  </entry>
  
  <entry>
    <title>矢量函数分解</title>
    <link href="http://spiedeman.github.io/posts/2388637373/"/>
    <id>http://spiedeman.github.io/posts/2388637373/</id>
    <published>2018-10-08T08:34:27.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:59 GMT+0800 (中国标准时间) --><p>结论：<strong>纵向无旋，横向无源</strong></p><hr><p>任意给定一个矢量函数 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi><mo>(</mo><mover accent="true"><mi>x</mi><mo stretchy="true">→</mo></mover><mo>)</mo><mo>=</mo><mo>(</mo><msub><mi>w</mi><mn>1</mn></msub><mo>(</mo><mover accent="true"><mi>x</mi><mo stretchy="true">→</mo></mover><mo>)</mo><mo separator="true">,</mo><msub><mi>w</mi><mn>2</mn></msub><mo>(</mo><mover accent="true"><mi>x</mi><mo stretchy="true">→</mo></mover><mo>)</mo><mo separator="true">,</mo><msub><mi>w</mi><mn>3</mn></msub><mo>(</mo><mover accent="true"><mi>x</mi><mo stretchy="true">→</mo></mover><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">w(\overrightarrow{x})=(w_1(\overrightarrow{x}),w_2(\overrightarrow{x}),w_3(\overrightarrow{x}))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20256em;vertical-align:-.25em"></span><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9525600000000001em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span class="svg-align" style="top:-3.43056em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.20256em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-.02691em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9525600000000001em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span class="svg-align" style="top:-3.43056em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-.02691em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9525600000000001em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span class="svg-align" style="top:-3.43056em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-.02691em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9525600000000001em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span class="svg-align" style="top:-3.43056em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>。在傅立叶空间中，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>k</mi><mo stretchy="true">→</mo></mover></mrow><annotation encoding="application/x-tex">\overrightarrow{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.21644em;vertical-align:0"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.21644em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span class="svg-align" style="top:-3.69444em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span></span></span></span>模式的系数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi><mo>(</mo><mover accent="true"><mi>k</mi><mo stretchy="true">→</mo></mover><mo>)</mo><mo>=</mo><mo>(</mo><msub><mi>w</mi><mn>1</mn></msub><mo>(</mo><mover accent="true"><mi>k</mi><mo stretchy="true">→</mo></mover><mo>)</mo><mo separator="true">,</mo><msub><mi>w</mi><mn>2</mn></msub><mo>(</mo><mover accent="true"><mi>k</mi><mo stretchy="true">→</mo></mover><mo>)</mo><mo separator="true">,</mo><msub><mi>w</mi><mn>3</mn></msub><mo>(</mo><mover accent="true"><mi>k</mi><mo stretchy="true">→</mo></mover><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">w(\overrightarrow{k})=(w_1(\overrightarrow{k}),w_2(\overrightarrow{k}),w_3(\overrightarrow{k}))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.46644em;vertical-align:-.25em"></span><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.21644em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span class="svg-align" style="top:-3.69444em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.46644em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-.02691em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.21644em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span class="svg-align" style="top:-3.69444em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-.02691em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.21644em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span class="svg-align" style="top:-3.69444em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-.02691em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.21644em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span class="svg-align" style="top:-3.69444em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><br>可以分解为动量<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span></span>的平行和垂直方向。</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi><mo>=</mo><msup><mi>w</mi><mrow><mi mathvariant="normal">/</mi><mi mathvariant="normal">/</mi></mrow></msup><mo>+</mo><msup><mi>w</mi><mi mathvariant="normal">⊥</mi></msup></mrow><annotation encoding="application/x-tex">w = w^{//} + w^{\bot}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.0213299999999998em;vertical-align:-.08333em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.938em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">/</span><span class="mord mtight">/</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.8991079999999999em;vertical-align:0"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8991079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">⊥</span></span></span></span></span></span></span></span></span></span></span></span></span></p><p>且有 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>w</mi><mrow><mi mathvariant="normal">/</mi><mi mathvariant="normal">/</mi></mrow></msup><mi mathvariant="normal">/</mi><mi mathvariant="normal">/</mi><mover accent="true"><mi>k</mi><mo stretchy="true">→</mo></mover></mrow><annotation encoding="application/x-tex">w^{//} // \overrightarrow{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.46644em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8879999999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">/</span><span class="mord mtight">/</span></span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord">/</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.21644em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span class="svg-align" style="top:-3.69444em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span></span></span></span>及 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>w</mi><mi mathvariant="normal">⊥</mi></msup><mo>⋅</mo><mover accent="true"><mi>k</mi><mo stretchy="true">→</mo></mover><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">w^{\bot}\cdot{\overrightarrow{k}} = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.849108em;vertical-align:0"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.849108em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">⊥</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1.21644em;vertical-align:0"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.21644em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span class="svg-align" style="top:-3.69444em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">0</span></span></span></span></p><p>回到实空间中，发现 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi><mo>(</mo><mover accent="true"><mi>x</mi><mo stretchy="true">→</mo></mover><mo>)</mo></mrow><annotation encoding="application/x-tex">w(\overrightarrow{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20256em;vertical-align:-.25em"></span><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9525600000000001em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span class="svg-align" style="top:-3.43056em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 可以分解为纵向和横向两部分，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>w</mi><mrow><mi mathvariant="normal">/</mi><mi mathvariant="normal">/</mi></mrow></msup><mo>(</mo><mover accent="true"><mi>x</mi><mo stretchy="true">→</mo></mover><mo>)</mo></mrow><annotation encoding="application/x-tex">w^{//}(\overrightarrow{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20256em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8879999999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">/</span><span class="mord mtight">/</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9525600000000001em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span class="svg-align" style="top:-3.43056em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>w</mi><mi mathvariant="normal">⊥</mi></msup><mo>(</mo><mover accent="true"><mi>x</mi><mo stretchy="true">→</mo></mover><mo>)</mo></mrow><annotation encoding="application/x-tex">w^{\bot}(\overrightarrow{x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20256em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.849108em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">⊥</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9525600000000001em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span class="svg-align" style="top:-3.43056em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。分别有如下性质：</p><ul><li>纵向无旋</li></ul><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∇</mi><mo>×</mo><msup><mi>w</mi><mrow><mi mathvariant="normal">/</mi><mi mathvariant="normal">/</mi></mrow></msup><mo>(</mo><mover accent="true"><mi>x</mi><mo stretchy="true">→</mo></mover><mo>)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\nabla \times w^{//}(\overrightarrow{x}) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.76666em;vertical-align:-.08333em"></span><span class="mord">∇</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1.20256em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.938em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">/</span><span class="mord mtight">/</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9525600000000001em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span class="svg-align" style="top:-3.43056em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">0</span></span></span></span></span></p><ul><li>横向无源</li></ul><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∇</mi><mo>⋅</mo><msup><mi>w</mi><mi mathvariant="normal">⊥</mi></msup><mo>(</mo><mover accent="true"><mi>x</mi><mo stretchy="true">→</mo></mover><mo>)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\nabla \cdot w^{\bot}(\overrightarrow{x}) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord">∇</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1.20256em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8991079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">⊥</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9525600000000001em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span class="svg-align" style="top:-3.43056em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="height:.522em;min-width:.888em"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">0</span></span></span></span></span></p><h1 id="投影算符"><a class="markdownIt-Anchor" href="#投影算符"></a> 投影算符</h1><p>傅立叶空间中，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span></span> mode 的纵向（横向）投影算符分别为</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>P</mi><mo>∥</mo></msup><mo>(</mo><mover accent="true"><mi>k</mi><mo>⃗</mo></mover><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mover accent="true"><mi>k</mi><mo>^</mo></mover><mo>⊗</mo><mover accent="true"><mi>k</mi><mo>^</mo></mover></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msup><mi>P</mi><mo>⊥</mo></msup><mo>(</mo><mover accent="true"><mi>k</mi><mo>⃗</mo></mover><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mn>1</mn><mo>−</mo><mover accent="true"><mi>k</mi><mo>^</mo></mover><mo>⊗</mo><mover accent="true"><mi>k</mi><mo>^</mo></mover></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} P^{\parallel}(\vec{k}) &amp;= \hat{k}\otimes\hat{k} \\ P^{\perp}(\vec{k}) &amp;= 1 - \hat{k}\otimes\hat{k} \\ \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.27488em;vertical-align:-1.38744em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.88744em"><span style="top:-3.91em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:.13889em">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.938em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">∥</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9774399999999999em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.2355em"><span class="overlay" style="height:.714em;width:.471em"><svg width="0.471em" height="0.714em" style="width:.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.2725600000000004em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:.13889em">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8991079999999999em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">⊥</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9774399999999999em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.2355em"><span class="overlay" style="height:.714em;width:.471em"><svg width="0.471em" height="0.714em" style="width:.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.38744em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.88744em"><span style="top:-3.91em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9578799999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.25em">^</span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9578799999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.25em">^</span></span></span></span></span></span></span></span><span style="top:-2.2725600000000004em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord">1</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9578799999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.25em">^</span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9578799999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.25em">^</span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.38744em"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>或者分量表示</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msubsup><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow><mo>∥</mo></msubsup><mo>(</mo><mover accent="true"><mi>k</mi><mo>⃗</mo></mover><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mover accent="true"><mi>k</mi><mo>^</mo></mover><mi>i</mi></msub><msub><mover accent="true"><mi>k</mi><mo>^</mo></mover><mi>j</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msubsup><mi>P</mi><mrow><mi>i</mi><mi>j</mi></mrow><mo>⊥</mo></msubsup><mo>(</mo><mover accent="true"><mi>k</mi><mo>⃗</mo></mover><mo>)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>δ</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>−</mo><msub><mover accent="true"><mi>k</mi><mo>^</mo></mover><mi>i</mi></msub><msub><mover accent="true"><mi>k</mi><mo>^</mo></mover><mi>j</mi></msub></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} P^{\parallel}_{ij}(\vec{k}) &amp;= \hat{k}_i\hat{k}_j \\ P^{\perp}_{ij}(\vec{k}) &amp;= \delta_{ij} - \hat{k}_i\hat{k}_j \\ \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.41832em;vertical-align:-1.4591600000000002em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.9591599999999998em"><span style="top:-3.95916em"><span class="pstrut" style="height:3.0448em"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:.13889em">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em"><span style="top:-2.4231360000000004em;margin-left:-.13889em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:.05724em">j</span></span></span></span><span style="top:-3.2198em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">∥</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.412972em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9774399999999999em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.2355em"><span class="overlay" style="height:.714em;width:.471em"><svg width="0.471em" height="0.714em" style="width:.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.2687479999999995em"><span class="pstrut" style="height:3.0448em"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:.13889em">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.899108em"><span style="top:-2.4530000000000003em;margin-left:-.13889em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:.05724em">j</span></span></span></span><span style="top:-3.1130000000000004em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">⊥</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.383108em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9774399999999999em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.2355em"><span class="overlay" style="height:.714em;width:.471em"><svg width="0.471em" height="0.714em" style="width:.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4591600000000002em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.9591599999999998em"><span style="top:-3.95916em"><span class="pstrut" style="height:3.0448em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9578799999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.25em">^</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.31166399999999994em"><span style="top:-2.5500000000000003em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9578799999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.25em">^</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.311664em"><span style="top:-2.5500000000000003em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span></span></span><span style="top:-2.2687479999999995em"><span class="pstrut" style="height:3.0448em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03785em">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.311664em"><span style="top:-2.5500000000000003em;margin-left:-.03785em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:.05724em">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9578799999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.25em">^</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.31166399999999994em"><span style="top:-2.5500000000000003em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.9578799999999998em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span><span style="top:-3.26344em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-.25em">^</span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.311664em"><span style="top:-2.5500000000000003em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:.05724em">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.286108em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4591600000000002em"><span></span></span></span></span></span></span></span></span></span></span></span></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:59 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;结论：&lt;strong&gt;纵向无旋，横向无源&lt;/strong&gt;&lt;/p&gt;&lt;hr&gt;&lt;p&gt;任意给定一个矢量函数 &lt;span class=&quot;katex&quot;&gt;&lt;spa
      
    
    </summary>
    
      <category term="Math" scheme="http://spiedeman.github.io/categories/Math/"/>
    
    
  </entry>
  
  <entry>
    <title>pyenv基础教程</title>
    <link href="http://spiedeman.github.io/posts/1952119038/"/>
    <id>http://spiedeman.github.io/posts/1952119038/</id>
    <published>2018-09-30T08:52:46.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><p><a href="https://github.com/pyenv/pyenv#table-of-contents" target="_blank" rel="noopener">pyenv</a> 是一个<code>python</code>版本管理软件。受到<code>ruby</code>的同类软件 <a href="https://github.com/rbenv/rbenv" target="_blank" rel="noopener">rbenv</a>和 <a href="https://github.com/rbenv/ruby-build" target="_blank" rel="noopener">ruby-build</a>的启发。</p><h1 id="安装-pyenv"><a class="markdownIt-Anchor" href="#安装-pyenv"></a> 安装 pyenv</h1><h2 id="macos"><a class="markdownIt-Anchor" href="#macos"></a> MacOS</h2><p>使用<code>homebrew</code>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br><span class="line">brew install pyenv</span><br></pre></td></tr></table></figure><h2 id="linux"><a class="markdownIt-Anchor" href="#linux"></a> Linux</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/pyenv/pyenv.git ~/.pyenv</span><br></pre></td></tr></table></figure><h1 id="配置"><a class="markdownIt-Anchor" href="#配置"></a> 配置</h1><p>在<code>.bashrc</code>中添加下列内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PYENV_ROOT=<span class="string">"<span class="variable">$home</span>/.pyenv"</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">"<span class="variable">$PYENV_ROOT</span>/bin:<span class="variable">$path</span>"</span></span><br><span class="line"><span class="comment"># 上面两行不需要，如果采用homebrew安装方式</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv init -)</span>"</span></span><br></pre></td></tr></table></figure><h1 id="依赖环境"><a class="markdownIt-Anchor" href="#依赖环境"></a> 依赖环境</h1><p><code>pyenv</code>可以用于安装多个<code>python</code>版本，并对其进行管理。为了避免出现可能的错误，安装之前需要准备好依赖环境。</p><ul><li><p>macos</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install openssl readline sqlite xz zlib</span><br></pre></td></tr></table></figure><p>如果运行 Mojave 或更高版本，还需额外安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo installer -pkg /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg -target /</span><br></pre></td></tr></table></figure></li><li><p>Debian/Ubuntu</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev</span><br></pre></td></tr></table></figure></li></ul><h1 id="安装python"><a class="markdownIt-Anchor" href="#安装python"></a> 安装python</h1><p><code>pyenv install</code>命令用于安装指定<code>python</code>版本。</p><p>为了添加<code>framework</code>支持，安装代码应如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MacOS</span></span><br><span class="line">env python_configure_opts=<span class="string">"--enable-framework"</span> pyenv install 3.6.6</span><br><span class="line"><span class="comment"># Linux</span></span><br><span class="line">env python_configure_opts=<span class="string">"--enable-shared"</span> pyenv install 3.6.6</span><br></pre></td></tr></table></figure><h1 id="参考命令"><a class="markdownIt-Anchor" href="#参考命令"></a> 参考命令</h1><h2 id="查看已安装python版本"><a class="markdownIt-Anchor" href="#查看已安装python版本"></a> 查看已安装python版本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pyenv versions</span><br><span class="line"></span><br><span class="line">  system</span><br><span class="line">* 2.7.15 (<span class="built_in">set</span> by /users/xuwutao/.python-version)</span><br><span class="line">  3.6.6</span><br></pre></td></tr></table></figure><h2 id="版本切换"><a class="markdownIt-Anchor" href="#版本切换"></a> 版本切换</h2><p><code>pyenv</code>总共设置了三个命令用于<code>python</code>的版本控制，按优先级由高到低以此为</p><ol><li><code>pyenv shell</code></li><li><code>pyenv local</code></li><li><code>pyenv global</code></li></ol><h3 id="pyenv-shell"><a class="markdownIt-Anchor" href="#pyenv-shell"></a> pyenv shell</h3><p>效果等价于设定环境变量<code>pyenv_version</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pyenv shell 3.6.6</span><br><span class="line"></span><br><span class="line"><span class="comment"># unset</span></span><br><span class="line">pyenv shell --<span class="built_in">unset</span></span><br></pre></td></tr></table></figure><h3 id="pyenv-local"><a class="markdownIt-Anchor" href="#pyenv-local"></a> pyenv local</h3><p>在当前目录下新建文件<code>.python-version</code>，记录<code>python</code>版本号，一行一个。如果当前目录下没有该文件，则一路往上寻找直到系统根目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pyenv <span class="built_in">local</span> 2.7.15</span><br><span class="line"><span class="comment"># 等价于</span></span><br><span class="line">touch .python-version &amp;&amp; <span class="built_in">echo</span> <span class="string">'2.7.15'</span> &gt; !$</span><br></pre></td></tr></table></figure><h3 id="pyenv-global"><a class="markdownIt-Anchor" href="#pyenv-global"></a> pyenv global</h3><p>和<code>pyenv global</code>对应的文件为<code>$(pyenv root)/version</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pyenv global 2.7.10</span><br><span class="line"><span class="comment"># 等价于</span></span><br><span class="line">touch ~/.pyenv/version &amp;&amp; <span class="built_in">echo</span> <span class="string">'2.7.10'</span> &gt; !$</span><br></pre></td></tr></table></figure><p>有一个特殊的版本名<code>system</code>是指<code>pyenv</code>之外的<code>python</code>（<code>macos</code>自带，<code>homebrew</code>安装版本等）。</p><p>三个命令都可以后接多个版本号。</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/pyenv/pyenv#table-of-contents&quot; target=&quot;_blank&quot; 
      
    
    </summary>
    
      <category term="Python" scheme="http://spiedeman.github.io/categories/Python/"/>
    
    
      <category term="Python" scheme="http://spiedeman.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>physics-oscillation</title>
    <link href="http://spiedeman.github.io/posts/3976093928/"/>
    <id>http://spiedeman.github.io/posts/3976093928/</id>
    <published>2018-09-24T02:32:26.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><p><a href="http://www2.hkedcity.net/sch_files/a/fms/fms-physics/public_html/resource/pdf/a8-damping.pdf" target="_blank" rel="noopener">参考</a></p><h1 id="阻尼振动"><a class="markdownIt-Anchor" href="#阻尼振动"></a> 阻尼振动</h1><ul><li><p>以弹簧为模型讨论，当考虑空气阻力时，运动方程为</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><mo>=</mo><mo>−</mo><mi>k</mi><mi>x</mi><mo>−</mo><mi>b</mi><mi>v</mi></mrow><annotation encoding="application/x-tex">ma = -kx - bv</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.77777em;vertical-align:-.08333em"></span><span class="mord">−</span><span class="mord mathdefault" style="margin-right:.03148em">k</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:.03588em">v</span></span></span></span></span></p><p>阻尼系数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault">b</span></span></span></span>可以随时间变化</p></li><li><p>阻尼振动的结果</p><ul><li><p>振动为周期运动，周期由劲度系数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span></span>和阻尼系数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault">b</span></span></span></span>共同决定<br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ω</mi><mo>=</mo><msqrt><mfrac><mi>k</mi><mi>m</mi></mfrac></msqrt><mo>→</mo><msub><mi>ω</mi><mi>N</mi></msub><mo>=</mo><msqrt><mrow><mfrac><mi>k</mi><mi>m</mi></mfrac><mo>−</mo><mfrac><msup><mi>γ</mi><mn>2</mn></msup><mn>4</mn></mfrac></mrow></msqrt></mrow><annotation encoding="application/x-tex">\omega = \sqrt{\dfrac{k}{m}}\rightarrow \omega_N = \sqrt{\dfrac{k}{m}-\dfrac{\gamma^2}{4}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-.8122799999999999em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.62772em"><span class="svg-align" style="top:-4.4em"><span class="pstrut" style="height:4.4em"></span><span class="mord" style="padding-left:1em"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.5877200000000005em"><span class="pstrut" style="height:4.4em"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em"><svg width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081c4,-6.7,10,-10,18,-10H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80H400000v40H1014z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.8122799999999999em"><span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.58056em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:-.03588em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:.10903em">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-.752446em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.687554em"><span class="svg-align" style="top:-4.4em"><span class="pstrut" style="height:4.4em"></span><span class="mord" style="padding-left:1em"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:.05556em">γ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.6475540000000004em"><span class="pstrut" style="height:4.4em"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em"><svg width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081c4,-6.7,10,-10,18,-10H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80H400000v40H1014z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.752446em"><span></span></span></span></span></span></span></span></span></p></li><li><p>振幅随时间减小</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>→</mo><msub><mi>A</mi><mi>N</mi></msub><mo>=</mo><mi>A</mi><msup><mi>e</mi><mrow><mo>−</mo><mi>γ</mi><mi>t</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">A \rightarrow A_N = Ae^{-\gamma t / 2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.83333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:.10903em">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.8879999999999999em;vertical-align:0"></span><span class="mord mathdefault">A</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8879999999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight" style="margin-right:.05556em">γ</span><span class="mord mathdefault mtight">t</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p></li></ul></li><li><p>图像表示</p><img src="/posts/3976093928/damp-oscillation.png"></li></ul><h1 id="定量分析"><a class="markdownIt-Anchor" href="#定量分析"></a> 定量分析</h1><ul><li><p>运动方程可以改写为</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><msup><mi>d</mi><mn>2</mn></msup><mi>x</mi></mrow><mrow><mi>d</mi><msup><mi>t</mi><mn>2</mn></msup></mrow></mfrac><mo>+</mo><mi>γ</mi><mfrac><mrow><mi>d</mi><mi>x</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>+</mo><msup><mi>ω</mi><mn>2</mn></msup><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\dfrac{d^2x}{dt^2} + \gamma\dfrac{dx}{dt} + \omega^2x = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.177108em;vertical-align:-.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.740108em"><span style="top:-2.9890000000000003em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathdefault">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:2.05744em;vertical-align:-.686em"></span><span class="mord mathdefault" style="margin-right:.05556em">γ</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord mathdefault">t</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord mathdefault">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.8141079999999999em;vertical-align:0"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">0</span></span></span></span>，<br><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>γ</mi><mo>=</mo><mfrac><mi>b</mi><mi>m</mi></mfrac></mrow><annotation encoding="application/x-tex">\gamma=\dfrac{b}{m}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.19444em"></span><span class="mord mathdefault" style="margin-right:.05556em">γ</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.05744em;vertical-align:-.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ω</mi><mo>=</mo><msqrt><mfrac><mi>k</mi><mi>m</mi></mfrac></msqrt></mrow><annotation encoding="application/x-tex">\omega=\sqrt{\dfrac{k}{m}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-.8122799999999999em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.62772em"><span class="svg-align" style="top:-4.4em"><span class="pstrut" style="height:4.4em"></span><span class="mord" style="padding-left:1em"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.5877200000000005em"><span class="pstrut" style="height:4.4em"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em"><svg width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081c4,-6.7,10,-10,18,-10H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80H400000v40H1014z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.8122799999999999em"><span></span></span></span></span></span></span></span></span></p></li><li><p>考虑同形式的复数方程</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><msup><mi>d</mi><mn>2</mn></msup><mi>Z</mi></mrow><mrow><mi>d</mi><msup><mi>t</mi><mn>2</mn></msup></mrow></mfrac><mo>+</mo><mi>γ</mi><mfrac><mrow><mi>d</mi><mi>Z</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>+</mo><msup><mi>ω</mi><mn>2</mn></msup><mi>Z</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\dfrac{d^2Z}{dt^2} + \gamma\dfrac{dZ}{dt} + \omega^2Z = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.177108em;vertical-align:-.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.740108em"><span style="top:-2.9890000000000003em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:.07153em">Z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:2.05744em;vertical-align:-.686em"></span><span class="mord mathdefault" style="margin-right:.05556em">γ</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord mathdefault">t</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:.07153em">Z</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.8141079999999999em;vertical-align:0"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:.07153em">Z</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">0</span></span></span></span>，</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.07153em">Z</span></span></span></span> 的实数部分即为阻尼方程的解。</p></li><li><p>令<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mo>=</mo><mi>C</mi><msup><mi>e</mi><mrow><mi>A</mi><mi>t</mi></mrow></msup></mrow><annotation encoding="application/x-tex">Z = Ce^{At}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.07153em">Z</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.8413309999999999em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.07153em">C</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8413309999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight">t</span></span></span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault">A</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.07153em">C</span></span></span></span>为复常数，代入上式得到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault">A</span></span></span></span>的方程</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>A</mi><mn>2</mn></msup><mo>+</mo><mi>γ</mi><mi>A</mi><mo>+</mo><msup><mi>ω</mi><mn>2</mn></msup><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">A^2 + \gamma A + \omega^2 = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.897438em;vertical-align:-.08333em"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.8777699999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault" style="margin-right:.05556em">γ</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.8141079999999999em;vertical-align:0"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">0</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault">A</span></span></span></span>的解为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>=</mo><mo>−</mo><mi>γ</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo>±</mo><mi>i</mi><msqrt><mrow><msup><mi>ω</mi><mn>2</mn></msup><mo>−</mo><mfrac><msup><mi>γ</mi><mn>2</mn></msup><mn>4</mn></mfrac></mrow></msqrt></mrow><annotation encoding="application/x-tex">A=-\gamma/2\pm i\sqrt{\omega^2-\dfrac{\gamma^2}{4}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">−</span><span class="mord mathdefault" style="margin-right:.05556em">γ</span><span class="mord">/</span><span class="mord">2</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">±</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-.752446em"></span><span class="mord mathdefault">i</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.687554em"><span class="svg-align" style="top:-4.4em"><span class="pstrut" style="height:4.4em"></span><span class="mord" style="padding-left:1em"><span class="mord"><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.740108em"><span style="top:-2.9890000000000003em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:.05556em">γ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.6475540000000004em"><span class="pstrut" style="height:4.4em"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em"><svg width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081c4,-6.7,10,-10,18,-10H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80H400000v40H1014z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.752446em"><span></span></span></span></span></span></span></span></span>， 假设阻力不大，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ω</mi><mo>&gt;</mo><mi>γ</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">\omega\gt\gamma/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.5782em;vertical-align:-.0391em"></span><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault" style="margin-right:.05556em">γ</span><span class="mord">/</span><span class="mord">2</span></span></span></span></p></li><li><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.07153em">Z</span></span></span></span>的通解为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mo>=</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>γ</mi><mi>t</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mo>(</mo><msub><mi>C</mi><mn>1</mn></msub><msup><mi>e</mi><mrow><mo>+</mo><mi>i</mi><msub><mi>ω</mi><mi>N</mi></msub><mi>t</mi></mrow></msup><mo>+</mo><msub><mi>C</mi><mn>2</mn></msub><msup><mi>e</mi><mrow><mo>−</mo><mi>i</mi><msub><mi>ω</mi><mi>N</mi></msub><mi>t</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">Z=e^{-\gamma t/2}(C_1e^{+i\omega_N t} + C_2e^{-i\omega_N t})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.07153em">Z</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.138em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8879999999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight" style="margin-right:.05556em">γ</span><span class="mord mathdefault mtight">t</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:.07153em">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-.07153em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.824664em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">+</span><span class="mord mathdefault mtight">i</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:.03588em">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3448em"><span style="top:-2.3567071428571427em;margin-left:-.03588em;margin-right:.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:.10903em">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.14329285714285717em"><span></span></span></span></span></span></span><span class="mord mathdefault mtight">t</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1.0746639999999998em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.07153em">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-.07153em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.824664em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight">i</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:.03588em">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3448em"><span style="top:-2.3567071428571427em;margin-left:-.03588em;margin-right:.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight" style="margin-right:.10903em">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.14329285714285717em"><span></span></span></span></span></span></span><span class="mord mathdefault mtight">t</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p></li><li><p>故阻尼方程的解为</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>=</mo><mi>R</mi><mi>e</mi><mo>(</mo><mi>Z</mi><mo>)</mo><mo>=</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>γ</mi><mi>t</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mo>[</mo><mi>D</mi><mi>cos</mi><mo>⁡</mo><mo>(</mo><msub><mi>ω</mi><mi>N</mi></msub><mi>t</mi><mo>)</mo><mo>−</mo><mi>E</mi><mi>sin</mi><mo>⁡</mo><mo>(</mo><msub><mi>ω</mi><mi>N</mi></msub><mi>t</mi><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">x = Re(Z) = e^{-\gamma t/2}[D\cos(\omega_N t) - E\sin(\omega_N t)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault" style="margin-right:.00773em">R</span><span class="mord mathdefault">e</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:.07153em">Z</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.138em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8879999999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight" style="margin-right:.05556em">γ</span><span class="mord mathdefault mtight">t</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:.02778em">D</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mop">cos</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:-.03588em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:.10903em">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault" style="margin-right:.05764em">E</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mop">sin</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:-.03588em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:.10903em">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.02778em">D</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.05764em">E</span></span></span></span> 为常数。</p><p>令初始相位为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>θ</mi><mn>0</mn></msub><mo>=</mo><msup><mi>tan</mi><mo>⁡</mo><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>(</mo><mfrac><mi>D</mi><mi>E</mi></mfrac><mo>)</mo></mrow><annotation encoding="application/x-tex">\theta_0=\tan^{-1}(\dfrac{D}{E})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.84444em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02778em">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-.02778em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.04633em;vertical-align:-.686em"></span><span class="mop"><span class="mop">tan</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8190879999999999em"><span style="top:-3.06798em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.05764em">E</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02778em">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo>=</mo><msqrt><mrow><msup><mi>D</mi><mn>2</mn></msup><mo>−</mo><msup><mi>E</mi><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">L=\sqrt{D^2-E^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault">L</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-.12661100000000003em"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.913389em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:.833em"><span class="mord"><span class="mord mathdefault" style="margin-right:.02778em">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.740108em"><span style="top:-2.9890000000000003em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.05764em">E</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.740108em"><span style="top:-2.9890000000000003em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.873389em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:.853em;height:1.08em"><svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.12661100000000003em"><span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault">x</span></span></span></span>可以化简为</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>=</mo><mi>L</mi><msup><mi>e</mi><mrow><mo>−</mo><mi>γ</mi><mi>t</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mi>cos</mi><mo>⁡</mo><mo>(</mo><msub><mi>ω</mi><mi>N</mi></msub><mi>t</mi><mo>+</mo><msub><mi>θ</mi><mn>0</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">x = Le^{-\gamma t/2}\cos(\omega_N t + \theta_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.138em;vertical-align:-.25em"></span><span class="mord mathdefault">L</span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8879999999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathdefault mtight" style="margin-right:.05556em">γ</span><span class="mord mathdefault mtight">t</span><span class="mord mtight">/</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mop">cos</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:-.03588em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:.10903em">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathdefault" style="margin-right:.02778em">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-.02778em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p></li></ul><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;a href=&quot;http://www2.hkedcity.net/sch_files/a/fms/fms-physics/public_html/r
      
    
    </summary>
    
      <category term="Physics" scheme="http://spiedeman.github.io/categories/Physics/"/>
    
      <category term="Oscillation" scheme="http://spiedeman.github.io/categories/Physics/Oscillation/"/>
    
    
      <category term="Physics" scheme="http://spiedeman.github.io/tags/Physics/"/>
    
      <category term="Oscillation" scheme="http://spiedeman.github.io/tags/Oscillation/"/>
    
  </entry>
  
  <entry>
    <title>pandas 简介</title>
    <link href="http://spiedeman.github.io/posts/1982572123/"/>
    <id>http://spiedeman.github.io/posts/1982572123/</id>
    <published>2018-09-21T06:22:14.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><p><strong>学习目标</strong></p><ul><li>大致了解<em>pandas</em>库的<code>DataFrame</code>和<code>Series</code>数据结构</li><li>存取和处理<code>DataFrame</code>和<code>Series</code>中的数据</li><li>将<code>CSV</code>数据导入<code>pandas</code>库的<code>DataFrame</code></li><li>对<code>DataFrame</code>重建索引来随机打乱数据</li></ul><p><a href="http://pandas.pydata.org" target="_blank" rel="noopener"><u><em>pandas</em></u></a> 是一种存列数据分析<code>API</code>。它是用于处理和分析输入数据的强大工具，很多机器学习框架都支持将<em>pandas</em>数据结构作为输入。本文只介绍它的核心概念。有关更完整的参考，请访问 <a href="http://pandas.pydata.org/pandas-docs/stable/index.html" target="_blank" rel="noopener"><u><em>pandas</em>文档网站</u></a>。</p><h1 id="基本概念"><a class="markdownIt-Anchor" href="#基本概念"></a> 基本概念</h1><p>导入<em>pandas</em> API 并输出相应的 API 版本：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">pd.__version__</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">u'0.22.2'</span></span><br></pre></td></tr></table></figure><p><em>pandas</em>中主要的数据被实现为以下两类：</p><ul><li><strong>DataFrame</strong>，可以想象成一个<code>Excel</code>表，包含多个行和已命名的列。</li><li><strong>Series</strong>，它是单一列。DataFrame 中包含一个或多个 Series，每个 Series<br>均有一个名称。</li></ul><p>数据框架是用于 数据操控的一种常用抽象实现形式。 <a href="https://spark.apache.org" target="_blank" rel="noopener"><u>Spark</u></a>和 <a href="https://www.r-project.org/about.html" target="_blank" rel="noopener"><u>R</u></a>中也有类似的实现。</p><p>创建 Series 的一种方法时构建 Series 对象。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.Series([<span class="string">'San Francisco'</span>, <span class="string">'San Jose'</span>, <span class="string">'Sacramento'</span>])</span><br></pre></td></tr></table></figure><p>DataFrame 和字典很像，Series 对应字典的 <strong>键-值对</strong>，Series 的名称为<strong>键</strong>，数据为<strong>值</strong>。例如像下面这样创建 DataFrame 对象：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">city_names = pd.Series([<span class="string">'San Francisco'</span>, <span class="string">'San Jose'</span>, <span class="string">'Sacramento'</span>])</span><br><span class="line">population = pd.Series([<span class="number">852469</span>, <span class="number">1015785</span>, <span class="number">485199</span>])</span><br><span class="line"></span><br><span class="line">pd.DataFrame(&#123;<span class="string">'City name'</span>: city_names, <span class="string">'Population'</span>: population&#125;)</span><br></pre></td></tr></table></figure><p>但在大多数情况下，是将整个文件加载到 DataFrame 中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = pd.read_csv(<span class="string">'path or url'</span>, *args, **kwargs)</span><br></pre></td></tr></table></figure><h1 id="访问数据"><a class="markdownIt-Anchor" href="#访问数据"></a> 访问数据</h1><p>前面提到，DataFrame 和字典很像，还体现在访问数据的方式上。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cities[<span class="string">'City name'</span>]     <span class="comment"># 返回名称为 City name 的 Series</span></span><br><span class="line"></span><br><span class="line">cities[<span class="number">0</span>:<span class="number">2</span>]     <span class="comment"># 返回所有 Series 的前两个值构建的 DataFrame</span></span><br></pre></td></tr></table></figure><p>此外，<em>pandas</em>针对高级 <a href="http://pandas.pydata.org/pandas-docs/stable/indexing.html" target="_blank" rel="noopener"><u>索引和选择</u></a>提供了机器丰富的 API。</p><h1 id="操控数据"><a class="markdownIt-Anchor" href="#操控数据"></a> 操控数据</h1><p>可以向 Series 应用 Python 的基本运算指令。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">population / <span class="number">1000.</span></span><br></pre></td></tr></table></figure><p><a href="http://www.numpy.org" target="_blank" rel="noopener"><u>Numpy</u></a>是一种用于进行科学计算的常用工具包。<em>pandas<br>Series</em> 可用作大多数 Numpy 函数的参数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.log(population)</span><br></pre></td></tr></table></figure><p>对于更复杂的单列转换，可以使用 Series.apply。像 Python <a href="https://docs.python.org/2/library/functions.html#map" target="_blank" rel="noopener"><u>映射函数</u></a>一样，Series.apply 将以参数形式接受 <a href="https://docs.python.org/2/tutorial/controlflow.html#lambda-expressions" target="_blank" rel="noopener"><u>lambda函数</u></a>，而该函数会应用于每个值。<br>下面的示例创建了一个指明 population 是否超过 100 万的新 Series：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">population.apply(<span class="keyword">lambda</span> val: val &gt; <span class="number">1000000</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">0</span>    <span class="literal">False</span></span><br><span class="line"><span class="number">1</span>     <span class="literal">True</span></span><br><span class="line"><span class="number">2</span>    <span class="literal">False</span></span><br><span class="line">dtype: bool</span><br></pre></td></tr></table></figure><p>DataFrame 的修改方式也非常简单。例如，以下代码向现有 DataFrame 添加了两个 Series：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cities[<span class="string">'Area square miles'</span>] = pd.Series([<span class="number">46.87</span>, <span class="number">176.53</span>, <span class="number">97.92</span>])</span><br><span class="line">cities[<span class="string">'Population density'</span>] = cities[<span class="string">'Population'</span>] / cities[<span class="string">'Area square miles'</span>]</span><br><span class="line">cities</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;&lt;strong&gt;学习目标&lt;/strong&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;大致了解&lt;em&gt;pandas&lt;/em&gt;库的&lt;code&gt;DataFrame&lt;/code
      
    
    </summary>
    
      <category term="Python" scheme="http://spiedeman.github.io/categories/Python/"/>
    
      <category term="Pandas" scheme="http://spiedeman.github.io/categories/Python/Pandas/"/>
    
    
      <category term="Python" scheme="http://spiedeman.github.io/tags/Python/"/>
    
      <category term="Pandas" scheme="http://spiedeman.github.io/tags/Pandas/"/>
    
  </entry>
  
  <entry>
    <title>matplotlib 技巧</title>
    <link href="http://spiedeman.github.io/posts/1362387800/"/>
    <id>http://spiedeman.github.io/posts/1362387800/</id>
    <published>2018-09-19T08:04:13.000Z</published>
    <updated>2019-03-17T15:09:08.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><p>收集各种技巧、解决问题的办法。不断加深理解、熟悉<code>matplotlib</code>的使用。</p><h1 id="中文"><a class="markdownIt-Anchor" href="#中文"></a> 中文</h1><p><strong>查看支持的中文字体</strong></p><p>运行如下代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib.font_manager <span class="keyword">import</span> FontManager</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">fm = FontManager()</span><br><span class="line">mat_fonts = set(f.name <span class="keyword">for</span> f <span class="keyword">in</span> fm.ttflist)</span><br><span class="line"></span><br><span class="line">output = subprocess.check_output(</span><br><span class="line">    <span class="string">'fc-list :lang=zh -f "%&#123;family&#125;\n"'</span>, shell=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">zh_fonts = set(f.split(<span class="string">','</span>, <span class="number">1</span>)[<span class="number">0</span>] <span class="keyword">for</span> f <span class="keyword">in</span> output.split(<span class="string">'\n'</span>))</span><br><span class="line">available = mat_fonts &amp; zh_fonts</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可用中文字体</span></span><br><span class="line"><span class="keyword">for</span> f <span class="keyword">in</span> available:</span><br><span class="line">    <span class="keyword">print</span> f</span><br></pre></td></tr></table></figure><p>尝试发现<code>matplotlib</code>自带了一个可以显示中文的字体<code>Arial Unicode MS</code>。于是可以如下设置，不用下载字体，不用修改<code>matplotlib</code>配置文件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> rcParams</span><br><span class="line">rcParams[<span class="string">'font.sans-serif'</span>] = [<span class="string">'Arial Unicode MS'</span>]</span><br></pre></td></tr></table></figure><p>搞定中文乱码！</p><h1 id="figure"><a class="markdownIt-Anchor" href="#figure"></a> Figure</h1><h2 id="设置图片大小"><a class="markdownIt-Anchor" href="#设置图片大小"></a> 设置图片大小</h2><p><code>px(pixel), inch, pt(point)</code>三者之间的关系为</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 px = constant size on screen</span><br><span class="line">1 inch = dpi px     <span class="comment"># dpi is variable</span></span><br><span class="line">1 inch = 72 pt      <span class="comment"># 确定关系</span></span><br></pre></td></tr></table></figure><p><strong>Figure size (<code>figsize</code>)</strong> 决定<code>figure</code>的尺寸，单位为<code>inches</code>。默认大小为<code>[6.4, 4.8]</code>。</p><p><strong>Dots per inches (dpi)</strong> 决定<code>figure</code>包含多少像素。默认大小为100。设置为<code>figsize=(w,h)</code>的<code>figure</code>包含</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">px, py = w * dpi, h * dpi   <span class="comment"># pixels</span></span><br><span class="line"><span class="comment"># e.g.</span></span><br><span class="line"><span class="comment"># 6.4 inches * 100 dpi = 640 pixels</span></span><br></pre></td></tr></table></figure><p>因此若要获得例如<code>(1200, 600)</code>大小的<code>figure</code>，单位为<code>pixel</code>，可以有各种不同的组合方式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">figsize = (<span class="number">15.</span> <span class="number">7.5</span>), dpi = <span class="number">80</span></span><br><span class="line">figsize = (<span class="number">12.</span> <span class="number">6</span>)  , dpi = <span class="number">100</span></span><br><span class="line">figsize = (<span class="number">8</span>, <span class="number">4</span>)   , dpi = <span class="number">150</span></span><br><span class="line">figsize = (<span class="number">6</span>, <span class="number">3</span>)   , dpi = <span class="number">200</span></span><br></pre></td></tr></table></figure><p>以上组合方式的不同之处在哪里？</p><p>差异在图形中线条、文字的粗细不同。<code>figure</code>中大多数元素如线条、标记、文本的<code>size</code>的单位为<code>points</code>。<code>Matplotlib</code>设置 <strong>Points per inch (ppi)</strong> 等于72。因此无论 <code>dpi</code> 等于多少，一英寸只画72个点。或者说 <code>dpi</code> 决定线条粗细，<code>figsize</code>决定内容多少。</p><div align="center"><img src="/posts/1362387800/Figure_1.png" width="100"><img src="/posts/1362387800/Figure_2.png" width="100"></div><div align="center"><img src="/posts/1362387800/Figure_3.png" width="200"><img src="/posts/1362387800/Figure_4.png" width="200"></div><div align="center"><img src="/posts/1362387800/Figure_5.png" width="400"><img src="/posts/1362387800/Figure_6.png" width="400"></div><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;p&gt;收集各种技巧、解决问题的办法。不断加深理解、熟悉&lt;code&gt;matplotlib&lt;/code&gt;的使用。&lt;/p&gt;&lt;h1 id=&quot;中文&quot;&gt;&lt;a class
      
    
    </summary>
    
      <category term="python" scheme="http://spiedeman.github.io/categories/python/"/>
    
      <category term="matplotlib" scheme="http://spiedeman.github.io/categories/python/matplotlib/"/>
    
    
      <category term="matplotlib" scheme="http://spiedeman.github.io/tags/matplotlib/"/>
    
  </entry>
  
  <entry>
    <title>cosmology</title>
    <link href="http://spiedeman.github.io/posts/3384466728/"/>
    <id>http://spiedeman.github.io/posts/3384466728/</id>
    <published>2018-09-19T03:00:38.000Z</published>
    <updated>2019-03-17T15:09:06.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><h1 id="note"><a class="markdownIt-Anchor" href="#note"></a> Note</h1><p>波数 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span></span> 和波长 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault">λ</span></span></span></span> 的关系：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn><mi>π</mi><mi mathvariant="normal">/</mi><mi>λ</mi></mrow><annotation encoding="application/x-tex">k=2\pi/\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03148em">k</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:.03588em">π</span><span class="mord">/</span><span class="mord mathdefault">λ</span></span></span></span><br>角速度 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ω</mi></mrow><annotation encoding="application/x-tex">\omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03588em">ω</span></span></span></span> 和周期 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.13889em">T</span></span></span></span> 的关系：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ω</mi><mo>=</mo><mn>2</mn><mi>π</mi><mi mathvariant="normal">/</mi><mi>T</mi><mo>=</mo><mn>2</mn><mi>π</mi><mi>f</mi></mrow><annotation encoding="application/x-tex">\omega=2\pi/T=2\pi f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:.03588em">π</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:.13889em">T</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:.03588em">π</span><span class="mord mathdefault" style="margin-right:.10764em">f</span></span></span></span><br>波速 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault">c</span></span></span></span> 和波长 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault">λ</span></span></span></span> 的关系：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>T</mi><mo>=</mo><mi>λ</mi></mrow><annotation encoding="application/x-tex">cT=\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:.13889em">T</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault">λ</span></span></span></span><br>波数 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span></span> 和角速度 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ω</mi></mrow><annotation encoding="application/x-tex">\omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03588em">ω</span></span></span></span> 的关系：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>k</mi><mo>=</mo><mi>ω</mi><mo>=</mo><mn>2</mn><mi>π</mi><mi>f</mi></mrow><annotation encoding="application/x-tex">ck=\omega=2\pi f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:.03148em">k</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03588em">ω</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:.03588em">π</span><span class="mord mathdefault" style="margin-right:.10764em">f</span></span></span></span><br>频率 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault" style="margin-right:.10764em">f</span></span></span></span> 和波数 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathdefault" style="margin-right:.03148em">k</span></span></span></span> 的关系：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>=</mo><mi>c</mi><mi>k</mi><mi mathvariant="normal">/</mi><mo>(</mo><mn>2</mn><mi>π</mi><mo>)</mo><mo>=</mo><mi>c</mi><mi mathvariant="normal">/</mi><mi>λ</mi></mrow><annotation encoding="application/x-tex">f=ck/(2\pi)=c/\lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault" style="margin-right:.10764em">f</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right:.03148em">k</span><span class="mord">/</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:.03588em">π</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">c</span><span class="mord">/</span><span class="mord mathdefault">λ</span></span></span></span></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;note&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#note&quot;&gt;&lt;/a&gt; Note&lt;/h1&gt;&lt;p&gt;波数 &lt;s
      
    
    </summary>
    
      <category term="cosmology" scheme="http://spiedeman.github.io/categories/cosmology/"/>
    
    
      <category term="cosmology" scheme="http://spiedeman.github.io/tags/cosmology/"/>
    
  </entry>
  
  <entry>
    <title>sed 学习笔记</title>
    <link href="http://spiedeman.github.io/posts/2825119572/"/>
    <id>http://spiedeman.github.io/posts/2825119572/</id>
    <published>2018-09-18T07:09:07.000Z</published>
    <updated>2019-03-17T15:09:06.000Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --><h1 id="sed-简介"><a class="markdownIt-Anchor" href="#sed-简介"></a> sed 简介</h1><p><code>sed</code> 是强大的文本编辑工具。所有的操作都在<strong>模式空间</strong>进行，且每次只会将一行文本复制到其中等待 <code>sed</code> 命令对其操作。因此，从第二条命令开始，操作的对象都是上一条命令作用后的文本。</p><h2 id="命令格式"><a class="markdownIt-Anchor" href="#命令格式"></a> 命令格式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed [option] <span class="string">'COMMANDS'</span> file</span><br></pre></td></tr></table></figure><p>常用的<code>option</code>有</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-e      表明后接 sed 命令。命令多于一条时不能省略</span><br><span class="line">-i      直接对文件进行操作。</span><br><span class="line">-f      后接包含一列 sed 命令的脚本文件。</span><br></pre></td></tr></table></figure><p>命令<code>COMMANDS</code> 通常格式为</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'address[,address]cmd[options]'</span>     <span class="comment"># 三部分组成：地址、命令、具体操作</span></span><br></pre></td></tr></table></figure><ul><li>地址：右行号、正则表达式给出，用于指定需要操作的行。有些命令只能操作单行，有些可以操作连续多行。地址对所有的命令都是可选项，如果不指定，则作用在所有的行上。</li><li>命令：有追加（<code>a</code>）、改变（<code>c</code>）、插入（<code>i</code>）、替换（<code>s</code>）等最常用。</li><li>选项：格式由前面的命令决定。</li></ul><h3 id="替换s"><a class="markdownIt-Anchor" href="#替换s"></a> 替换（s）</h3><p><code>options</code>的格式为<code>/pattern/replacement/flags</code>。</p><ul><li><code>pattern</code>与<code>replacement</code>都支持正则表达式。</li><li><code>flags</code>选项有<ul><li><code>n</code>：1~512的整数，表示只替换第<code>n</code>个匹配项。</li><li><code>g</code>：替换全部匹配项</li><li>默认替换第一个匹配项</li></ul></li></ul><h4 id="技巧"><a class="markdownIt-Anchor" href="#技巧"></a> 技巧</h4><p><code>pattern</code>和<code>replacement</code>中包含<code>Shell</code>变量<code>$var</code>。如果命令用单引号括起来，那么美元符号<code>$</code>分别表示行尾和符号本身。只有用双引号，<code>$var</code>才会被替换为变量值。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">var=LINUX</span><br><span class="line">sed <span class="string">'s/linux/$var/'</span> sonfile</span><br><span class="line">...<span class="variable">$var</span>...      <span class="comment"># linux 被替换为 $var</span></span><br><span class="line"></span><br><span class="line">var=LINUX</span><br><span class="line">sed <span class="string">"s/linux/<span class="variable">$var</span>"</span>  somefile</span><br><span class="line">...LINUX...     <span class="comment"># linux 被替换为 LINUX</span></span><br></pre></td></tr></table></figure><p>替换命令（s）格式中的斜杠<code>/</code>作为定界符，可以换成任何其它符号（好像有一个例外），并且必须出现三次。通常当匹配项或替换项中出现斜杠<code>/</code>时会变更定界符，如<code>#</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'s#pattern#replacement#'</span></span><br></pre></td></tr></table></figure><h4 id="例子"><a class="markdownIt-Anchor" href="#例子"></a> 例子</h4><ul><li>删除空白行</li></ul><p><code>sed -i '/^$/d' input.xxx # -i，修改源文件</code></p><ul><li>输出某一行到其他文件</li></ul><p><code>sed -n '3p' input.xxx &gt;&gt; output.xxx</code></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- build time:Mon Apr 01 2019 22:44:58 GMT+0800 (中国标准时间) --&gt;&lt;h1 id=&quot;sed-简介&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#sed-简介&quot;&gt;&lt;/a&gt; sed 简介&lt;/h1&gt;&lt;p
      
    
    </summary>
    
      <category term="bash" scheme="http://spiedeman.github.io/categories/bash/"/>
    
    
      <category term="bash" scheme="http://spiedeman.github.io/tags/bash/"/>
    
      <category term="sed" scheme="http://spiedeman.github.io/tags/sed/"/>
    
  </entry>
  
</feed>
